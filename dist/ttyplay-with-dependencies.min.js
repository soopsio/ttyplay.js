(function(){"use strict";function t(){this._events=this._events||{}}function e(){t.call(this)}function s(t){var i=this;if(!(this instanceof s)){return new s(arguments[0],arguments[1],arguments[2])}e.call(this),"number"==typeof t&&(t={cols:arguments[0],rows:arguments[1],handler:arguments[2]}),t=t||{},u(f(s.defaults),function(e){null==t[e]&&(t[e]=s.options[e],s[e]!==s.defaults[e]&&(t[e]=s[e])),i[e]=t[e]}),8===t.colors.length?t.colors=t.colors.concat(s._colors.slice(8)):16===t.colors.length?t.colors=t.colors.concat(s._colors.slice(16)):10===t.colors.length?t.colors=t.colors.slice(0,-2).concat(s._colors.slice(8,-2),t.colors.slice(-2)):18===t.colors.length&&(t.colors=t.colors.slice(0,-2).concat(s._colors.slice(16,-2),t.colors.slice(-2))),this.colors=t.colors,this.options=t,this.parent=t.body||t.parent||(p?p.getElementsByTagName("body")[0]:null),this.cols=t.cols||t.geometry[0],this.rows=t.rows||t.geometry[1],this.setRawMode,this.isTTY=!0,this.isRaw=!0,this.columns=this.cols,this.rows=this.rows,t.handler&&this.on("data",t.handler),this.ybase=0,this.ydisp=0,this.x=0,this.y=0,this.cursorState=0,this.cursorHidden=!1,this.convertEol,this.state=0,this.queue="",this.scrollTop=0,this.scrollBottom=this.rows-1,this.applicationKeypad=!1,this.applicationCursor=!1,this.originMode=!1,this.insertMode=!1,this.wraparoundMode=!1,this.normal=null,this.prefixMode=!1,this.selectMode=!1,this.visualMode=!1,this.searchMode=!1,this.searchDown,this.entry="",this.entryPrefix="Search: ",this._real,this._selected,this._textarea,this.charset=null,this.gcharset=null,this.glevel=0,this.charsets=[null],this.decLocator,this.x10Mouse,this.vt200Mouse,this.vt300Mouse,this.normalMouse,this.mouseEvents,this.sendFocus,this.utfMouse,this.sgrMouse,this.urxvtMouse,this.element,this.children,this.refreshStart,this.refreshEnd,this.savedX,this.savedY,this.savedCols,this.readable=!0,this.writable=!0,this.defAttr=131840,this.curAttr=this.defAttr,this.params=[],this.currentParam=0,this.prefix="",this.postfix="",this.lines=[];for(var r=this.rows;r--;){this.lines.push(this.blankLine())}this.tabs,this.setupStops()}function i(t,e,s,i){t.addEventListener(e,s,i||!1)}function r(t,e,s,i){t.removeEventListener(e,s,i||!1)}function o(t){return t.preventDefault&&t.preventDefault(),t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,!1}function a(t,e){function s(){this.constructor=t}s.prototype=e.prototype,t.prototype=new s}function h(t){var e=t.getElementsByTagName("body")[0],s=t.createElement("div");s.className="terminal";var i=t.createElement("div"),r=t.createElement("span");r.innerHTML="hello world",i.appendChild(r),s.appendChild(i),e.appendChild(s);var o=r.scrollWidth;r.style.fontWeight="bold";var a=r.scrollWidth;return e.removeChild(s),o!==a}function n(t,e){for(var s=t.length;s--;){if(t[s]===e){return s}}return-1}function l(t){return"＀">=t?!1:t>="！"&&"ﾾ">=t||t>="ￂ"&&"ￇ">=t||t>="ￊ"&&"ￏ">=t||t>="ￒ"&&"ￗ">=t||t>="ￚ"&&"ￜ">=t||t>="￠"&&"￦">=t||t>="￨"&&"￮">=t}function c(t,e,i){var r=t<<16|e<<8|i;if(null!=c._cache[r]){return c._cache[r]}for(var o,a,h,n,l,u=1/0,f=-1,p=0;p<s.vcolors.length;p++){if(o=s.vcolors[p],a=o[0],h=o[1],n=o[2],l=c.distance(t,e,i,a,h,n),0===l){f=p;break}u>l&&(u=l,f=p)}return c._cache[r]=f}function u(t,e,s){if(t.forEach){return t.forEach(e,s)}for(var i=0;i<t.length;i++){e.call(s,t[i],i,t)}}function f(t){if(Object.keys){return Object.keys(t)}var e,s=[];for(e in t){Object.prototype.hasOwnProperty.call(t,e)&&s.push(e)}return s}var p=this.document;t.prototype.addListener=function(t,e){this._events[t]=this._events[t]||[],this._events[t].push(e)},t.prototype.on=t.prototype.addListener,t.prototype.removeListener=function(t,e){if(this._events[t]){for(var s=this._events[t],i=s.length;i--;){if(s[i]===e||s[i].listener===e){return void s.splice(i,1)}}}},t.prototype.off=t.prototype.removeListener,t.prototype.removeAllListeners=function(t){this._events[t]&&delete this._events[t]},t.prototype.once=function(t,e){function s(){var i=Array.prototype.slice.call(arguments);return this.removeListener(t,s),e.apply(this,i)}return s.listener=e,this.on(t,s)},t.prototype.emit=function(t){if(this._events[t]){for(var e=Array.prototype.slice.call(arguments,1),s=this._events[t],i=s.length,r=0;i>r;r++){s[r].apply(this,e)}}},t.prototype.listeners=function(t){return this._events[t]=this._events[t]||[]},a(e,t),e.prototype.pipe=function(t,e){function s(){a.removeListener("data",i),a.removeListener("error",r),a.removeListener("end",o),t.removeListener("error",r),t.removeListener("close",s)}var i,r,o,a=this;return a.on("data",i=function(e){t.write(e)}),a.on("error",r=function(t){if(s(),!this.listeners("error").length){throw t}}),a.on("end",o=function(){t.end(),s()}),t.on("error",r),t.on("close",s),t.emit("pipe",a),t};var d=0,y=1,m=2,b=3,v=4,k=5,w=6,x={type:"udk"};a(s,e),s.tangoColors=["#2e3436","#cc0000","#4e9a06","#c4a000","#3465a4","#75507b","#06989a","#d3d7cf","#555753","#ef2929","#8ae234","#fce94f","#729fcf","#ad7fa8","#34e2e2","#eeeeec"],s.xtermColors=["#000000","#cd0000","#00cd00","#cdcd00","#0000ee","#cd00cd","#00cdcd","#e5e5e5","#7f7f7f","#ff0000","#00ff00","#ffff00","#5c5cff","#ff00ff","#00ffff","#ffffff"],s.colors=function(){function t(t,s,i){r.push("#"+e(t)+e(s)+e(i))}function e(t){return t=t.toString(16),t.length<2?"0"+t:t}var i,r=s.tangoColors.slice(),o=[0,95,135,175,215,255];for(i=0;216>i;i++){t(o[i/36%6|0],o[i/6%6|0],o[i%6])}for(i=0;24>i;i++){o=8+10*i,t(o,o,o)}return r}(),s.colors[256]="#000000",s.colors[257]="#f0f0f0",s._colors=s.colors.slice(),s.vcolors=function(){for(var t,e=[],i=s.colors,r=0;256>r;r++){t=parseInt(i[r].substring(1),16),e.push([t>>16&255,t>>8&255,255&t])}return e}(),s.defaults={colors:s.colors,convertEol:!1,termName:"xterm",geometry:[80,24],cursorBlink:!0,visualBell:!1,popOnBell:!1,scrollback:1e3,screenKeys:!1,debug:!1,useStyle:!1},s.options={},u(f(s.defaults),function(t){s[t]=s.defaults[t],s.options[t]=s.defaults[t]}),s.focus=null,s.prototype.focus=function(){s.focus!==this&&(s.focus&&s.focus.blur(),this.sendFocus&&this.send("[I"),this.showCursor(),s.focus=this)},s.prototype.blur=function(){s.focus===this&&(this.cursorState=0,this.refresh(this.y,this.y),this.sendFocus&&this.send("[O"),s.focus=null)},s.prototype.initGlobal=function(){var t=this.document;s._boundDocs=s._boundDocs||[],~n(s._boundDocs,t)||(s._boundDocs.push(t),s.bindPaste(t),s.bindKeys(t),s.bindCopy(t),this.isMobile&&this.fixMobile(t),this.useStyle&&s.insertStyle(t,this.colors[256],this.colors[257]))},s.bindPaste=function(t){var e=t.defaultView;i(e,"paste",function(t){var e=s.focus;if(e){return t.clipboardData?e.send(t.clipboardData.getData("text/plain")):e.context.clipboardData&&e.send(e.context.clipboardData.getData("Text")),e.element.contentEditable="inherit",o(t)}})},s.bindKeys=function(t){i(t,"keydown",function(t){if(s.focus){var e=t.target||t.srcElement;if(e){return e===s.focus.element||e===s.focus.context||e===s.focus.document||e===s.focus.body||e===s._textarea||e===s.focus.parent?s.focus.keyDown(t):void 0}}},!0),i(t,"keypress",function(t){if(s.focus){var e=t.target||t.srcElement;if(e){return e===s.focus.element||e===s.focus.context||e===s.focus.document||e===s.focus.body||e===s._textarea||e===s.focus.parent?s.focus.keyPress(t):void 0}}},!0),i(t,"mousedown",function(t){if(s.focus){var e=t.target||t.srcElement;if(e){do{if(e===s.focus.element){return}}while(e=e.parentNode);s.focus.blur()}}})},s.bindCopy=function(t){var e=t.defaultView;i(e,"copy",function(t){var e=s.focus;if(e&&e._selected){var i=e.getCopyTextarea(),r=e.grabText(e._selected.x1,e._selected.x2,e._selected.y1,e._selected.y2);e.emit("copy",r),i.focus(),i.textContent=r,i.value=r,i.setSelectionRange(0,r.length),_(function(){e.element.focus(),e.focus()},1)}})},s.prototype.fixMobile=function(t){var e=this,r=t.createElement("textarea");r.style.position="absolute",r.style.left="-32000px",r.style.top="-32000px",r.style.width="0px",r.style.height="0px",r.style.opacity="0",r.style.backgroundColor="transparent",r.style.borderStyle="none",r.style.outlineStyle="none",r.autocapitalize="none",r.autocorrect="off",t.getElementsByTagName("body")[0].appendChild(r),s._textarea=r,_(function(){r.focus()},1e3),this.isAndroid&&i(r,"change",function(){var t=r.textContent||r.value;r.value="",r.textContent="",e.send(t+"\r")})},s.insertStyle=function(t,e,s){var i=t.getElementById("term-style");if(!i){var r=t.getElementsByTagName("head")[0];if(r){var i=t.createElement("style");i.id="term-style",i.innerHTML=".terminal {\n  float: left;\n  border: "+e+' solid 5px;\n  font-family: "DejaVu Sans Mono", "Liberation Mono", monospace;\n  font-size: 11px;\n  color: '+s+";\n  background: "+e+";\n}\n\n.terminal-cursor {\n  color: "+e+";\n  background: "+s+";\n}\n",r.insertBefore(i,r.firstChild)}}},s.prototype.open=function(t){var e,r=this,o=0;if(this.parent=t||this.parent,!this.parent){throw new Error("Terminal requires a parent element.")}for(this.context=this.parent.ownerDocument.defaultView,this.document=this.parent.ownerDocument,this.body=this.document.getElementsByTagName("body")[0],this.context.navigator&&this.context.navigator.userAgent&&(this.isMac=!!~this.context.navigator.userAgent.indexOf("Mac"),this.isIpad=!!~this.context.navigator.userAgent.indexOf("iPad"),this.isIphone=!!~this.context.navigator.userAgent.indexOf("iPhone"),this.isAndroid=!!~this.context.navigator.userAgent.indexOf("Android"),this.isMobile=this.isIpad||this.isIphone||this.isAndroid,this.isMSIE=!!~this.context.navigator.userAgent.indexOf("MSIE")),this.element=this.document.createElement("div"),this.element.className="terminal",this.element.style.outline="none",this.element.setAttribute("tabindex",0),this.element.setAttribute("spellcheck","false"),this.element.style.backgroundColor=this.colors[256],this.element.style.color=this.colors[257],this.children=[];o<this.rows;o++){e=this.document.createElement("div"),this.element.appendChild(e),this.children.push(e)}this.parent.appendChild(this.element),this.refresh(0,this.rows-1),"useEvents"in this.options&&!this.options.useEvents||this.initGlobal(),"useFocus"in this.options&&!this.options.useFocus||(this.focus(),this.startBlink(),i(this.element,"focus",function(){r.focus(),r.isMobile&&s._textarea.focus()}),i(this.element,"mousedown",function(){r.focus()}),i(this.element,"mousedown",function(t){var e=null!=t.button?+t.button:null!=t.which?t.which-1:null;r.isMSIE&&(e=1===e?0:4===e?1:e),2===e&&(r.element.contentEditable="true",_(function(){r.element.contentEditable="inherit"},1))},!0)),"useMouse"in this.options&&!this.options.useMouse||this.bindMouse(),"useFocus"in this.options&&!this.options.useFocus||_(function(){r.element.focus()},100),null==s.brokenBold&&(s.brokenBold=h(this.document)),this.emit("open")},s.prototype.setRawMode=function(t){this.isRaw=!!t},s.prototype.bindMouse=function(){function t(t){var e,s;if(e=h(t),s=n(t)){switch(a(e,s),t.type){case"mousedown":u=e;break;case"mouseup":u=32;break;case f:}}}function e(t){var e,s=u;e=n(t),e&&(s+=32,a(s,e))}function s(t,e){if(c.utfMouse){if(2047===e){return t.push(0)}127>e?t.push(e):(e>2047&&(e=2047),t.push(192|e>>6),t.push(128|63&e))}else{if(255===e){return t.push(0)}e>127&&(e=127),t.push(e)}}function a(t,e){if(c.vt300Mouse){t&=3,e.x-=32,e.y-=32;var i="[24";if(0===t){i+="1"}else{if(1===t){i+="3"}else{if(2===t){i+="5"}else{if(3===t){return}i+="0"}}}return i+="~["+e.x+","+e.y+"]\r",void c.send(i)}if(c.decLocator){return t&=3,e.x-=32,e.y-=32,0===t?t=2:1===t?t=4:2===t?t=6:3===t&&(t=3),void c.send("["+t+";"+(3===t?4:0)+";"+e.y+";"+e.x+";"+(e.page||0)+"&w")}if(c.urxvtMouse){return e.x-=32,e.y-=32,e.x++,e.y++,void c.send("["+t+";"+e.x+";"+e.y+"M")}if(c.sgrMouse){return e.x-=32,e.y-=32,void c.send("[<"+(3===(3&t)?-4&t:t)+";"+e.x+";"+e.y+(3===(3&t)?"m":"M"))}var i=[];s(i,t),s(i,e.x),s(i,e.y),c.send("[M"+g.fromCharCode.apply(g,i))}function h(t){var e,s,i,r,o;switch(t.type){case"mousedown":e=null!=t.button?+t.button:null!=t.which?t.which-1:null,c.isMSIE&&(e=1===e?0:4===e?1:e);break;case"mouseup":e=3;break;case"DOMMouseScroll":e=t.detail<0?64:65;break;case"mousewheel":e=t.wheelDeltaY>0?64:65}return s=t.shiftKey?4:0,i=t.metaKey?8:0,r=t.ctrlKey?16:0,o=s|i|r,c.vt200Mouse?o&=r:c.normalMouse||(o=0),e=32+(o<<2)+e}function n(t){var e,s,i,r,o;if(null!=t.pageX){for(e=t.pageX,s=t.pageY,o=c.element;o&&o!==c.document.documentElement;){e-=o.offsetLeft,s-=o.offsetTop,o="offsetParent"in o?o.offsetParent:o.parentNode}return i=c.element.clientWidth,r=c.element.clientHeight,e=Math.round(e/i*c.cols),s=Math.round(s/r*c.rows),0>e&&(e=0),e>c.cols&&(e=c.cols),0>s&&(s=0),s>c.rows&&(s=c.rows),e+=32,s+=32,{x:e,y:s,type:t.type===f?"mousewheel":t.type}}}var l=this.element,c=this,u=32,f="onmousewheel"in this.context?"mousewheel":"DOMMouseScroll";i(l,"mousedown",function(s){return c.mouseEvents?(t(s),c.focus(),c.normalMouse&&i(c.document,"mousemove",e),c.x10Mouse||i(c.document,"mouseup",function a(s){return t(s),c.normalMouse&&r(c.document,"mousemove",e),r(c.document,"mouseup",a),o(s)}),o(s)):void 0}),i(l,f,function(e){return c.mouseEvents&&!(c.x10Mouse||c.vt300Mouse||c.decLocator)?(t(e),o(e)):void 0}),i(l,f,function(t){return c.mouseEvents||c.applicationKeypad?void 0:("DOMMouseScroll"===t.type?c.scrollDisp(t.detail<0?-5:5):c.scrollDisp(t.wheelDeltaY>0?-5:5),o(t))})},s.prototype.close=s.prototype.destroySoon=s.prototype.destroy=function(){this.destroyed||(this._blink&&(clearInterval(this._blink),delete this._blink),this.readable=!1,this.writable=!1,this.destroyed=!0,this._events={},this.handler=function(){},this.write=function(){},this.end=function(){},this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.emit("end"),this.emit("close"),this.emit("finish"),this.emit("destroy"))},s.prototype.refresh=function(t,e){var i,r,o,a,h,n,c,u,f,p,d,y,m,b;for(e-t>=this.rows/2&&(b=this.element.parentNode,b&&b.removeChild(this.element)),c=this.cols,r=t,e>=this.lines.length&&(this.log("`end` is too large. Most likely a bad CSR."),e=this.lines.length-1);e>=r;r++){for(m=r+this.ydisp,a=this.lines[m],h="",i=r!==this.y||!this.cursorState||this.ydisp!==this.ybase&&!this.selectMode||this.cursorHidden?-1:this.x,f=this.defAttr,o=0;c>o;o++){switch(u=a[o][0],n=a[o][1],o===i&&(u=-1),u!==f&&(f!==this.defAttr&&(h+="</span>"),u!==this.defAttr&&(-1===u?h+='<span class="reverse-video terminal-cursor">':(h+='<span style="',p=511&u,d=u>>9&511,y=u>>18,1&y&&(s.brokenBold||(h+="font-weight:bold;"),8>d&&(d+=8)),2&y&&(h+="text-decoration:underline;"),4&y&&(2&y?(h=h.slice(0,-1),h+=" blink;"):h+="text-decoration:blink;"),8&y&&(p=u>>9&511,d=511&u,1&y&&8>d&&(d+=8)),16&y&&(h+="visibility:hidden;"),256!==p&&(h+="background-color:"+this.colors[p]+";"),257!==d&&(h+="color:"+this.colors[d]+";"),h+='">'))),n){case"&":h+="&amp;";break;case"<":h+="&lt;";break;case">":h+="&gt;";break;default:" ">=n?h+="&nbsp;":(l(n)&&o++,h+=n)}f=u}f!==this.defAttr&&(h+="</span>"),this.children[r].innerHTML=h}b&&b.appendChild(this.element)},s.prototype._cursorBlink=function(){s.focus===this&&(this.cursorState^=1,this.refresh(this.y,this.y))},s.prototype.showCursor=function(){this.cursorState||(this.cursorState=1,this.refresh(this.y,this.y))},s.prototype.startBlink=function(){if(this.cursorBlink){var t=this;this._blinker=function(){t._cursorBlink()},this._blink=C(this._blinker,500)}},s.prototype.refreshBlink=function(){this.cursorBlink&&this._blink&&(clearInterval(this._blink),this._blink=C(this._blinker,500))},s.prototype.scroll=function(){var t;++this.ybase===this.scrollback&&(this.ybase=this.ybase/2|0,this.lines=this.lines.slice(-(this.ybase+this.rows)+1)),this.ydisp=this.ybase,t=this.ybase+this.rows-1,t-=this.rows-1-this.scrollBottom,t===this.lines.length?this.lines.push(this.blankLine()):this.lines.splice(t,0,this.blankLine()),0!==this.scrollTop&&(0!==this.ybase&&(this.ybase--,this.ydisp=this.ybase),this.lines.splice(this.ybase+this.scrollTop,1)),this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)},s.prototype.scrollDisp=function(t){this.ydisp+=t,this.ydisp>this.ybase?this.ydisp=this.ybase:this.ydisp<0&&(this.ydisp=0),this.refresh(0,this.rows-1)},s.prototype.write=function(t){var e,i,r,o=t.length,a=0;for(this.refreshStart=this.y,this.refreshEnd=this.y,this.ybase!==this.ydisp&&(this.ydisp=this.ybase,this.maxRange());o>a;a++,this.lch=r){switch(r=t[a],this.state){case d:switch(r){case"":this.bell();break;case"\n":case"":case"\f":this.convertEol&&(this.x=0),this.y++,this.y>this.scrollBottom&&(this.y--,this.scroll());break;case"\r":this.x=0;break;case"\b":this.x>0&&this.x--;break;case"	":this.x=this.nextStop();break;case"":this.setgLevel(1);break;case"":this.setgLevel(0);break;case"":this.state=y;break;default:if(r>=" "&&(this.charset&&this.charset[r]&&(r=this.charset[r]),this.x>=this.cols&&(this.x=0,this.y++,this.y>this.scrollBottom&&(this.y--,this.scroll())),this.lines[this.y+this.ybase][this.x]=[this.curAttr,r],this.x++,this.updateRange(this.y),l(r))){if(e=this.y+this.ybase,this.cols<2||this.x>=this.cols){this.lines[e][this.x-1]=[this.curAttr," "];break}this.lines[e][this.x]=[this.curAttr," "],this.x++}}break;case y:switch(r){case"[":this.params=[],this.currentParam=0,this.state=m;break;case"]":this.params=[],this.currentParam=0,this.state=b;break;case"P":this.params=[],this.prefix="",this.currentParam="",this.state=k;break;case"_":this.state=w;break;case"^":this.state=w;break;case"c":this.reset();break;case"E":this.x=0;case"D":this.index();break;case"M":this.reverseIndex();break;case"%":this.setgLevel(0),this.setgCharset(0,s.charsets.US),this.state=d,a++;break;case"(":case")":case"*":case"+":case"-":case".":switch(r){case"(":this.gcharset=0;break;case")":this.gcharset=1;break;case"*":this.gcharset=2;break;case"+":this.gcharset=3;break;case"-":this.gcharset=1;break;case".":this.gcharset=2}this.state=v;break;case"/":this.gcharset=3,this.state=v,a--;break;case"N":break;case"O":break;case"n":this.setgLevel(2);break;case"o":this.setgLevel(3);break;case"|":this.setgLevel(3);break;case"}":this.setgLevel(2);break;case"~":this.setgLevel(1);break;case"7":this.saveCursor(),this.state=d;break;case"8":this.restoreCursor(),this.state=d;break;case"#":this.state=d,a++;break;case"H":this.tabSet();break;case"=":this.log("Serial port requested application keypad."),this.applicationKeypad=!0,this.state=d;break;case">":this.log("Switching back to normal keypad."),this.applicationKeypad=!1,this.state=d;break;default:this.state=d,this.error("Unknown ESC control: %s.",r)}break;case v:switch(r){case"0":i=s.charsets.SCLD;break;case"A":i=s.charsets.UK;break;case"B":i=s.charsets.US;break;case"4":i=s.charsets.Dutch;break;case"C":case"5":i=s.charsets.Finnish;break;case"R":i=s.charsets.French;break;case"Q":i=s.charsets.FrenchCanadian;break;case"K":i=s.charsets.German;break;case"Y":i=s.charsets.Italian;break;case"E":case"6":i=s.charsets.NorwegianDanish;break;case"Z":i=s.charsets.Spanish;break;case"H":case"7":i=s.charsets.Swedish;break;case"=":i=s.charsets.Swiss;break;case"/":i=s.charsets.ISOLatin,a++;break;default:i=s.charsets.US}this.setgCharset(this.gcharset,i),this.gcharset=null,this.state=d;break;case b:if(""===this.lch&&"\\"===r||""===r){switch(""===this.lch&&("string"==typeof this.currentParam?this.currentParam=this.currentParam.slice(0,-1):"number"==typeof this.currentParam&&(this.currentParam=(this.currentParam-("".charCodeAt(0)-48))/10)),this.params.push(this.currentParam),this.params[0]){case 0:case 1:case 2:this.params[1]&&(this.title=this.params[1],this.handleTitle(this.title));break;case 3:break;case 4:case 5:break;case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:break;case 46:break;case 50:break;case 51:break;case 52:break;case 104:case 105:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:}this.params=[],this.currentParam=0,this.state=d}else{this.params.length?this.currentParam+=r:r>="0"&&"9">=r?this.currentParam=10*this.currentParam+r.charCodeAt(0)-48:";"===r&&(this.params.push(this.currentParam),this.currentParam="")}break;case m:if("?"===r||">"===r||"!"===r){this.prefix=r;break}if(r>="0"&&"9">=r){this.currentParam=10*this.currentParam+r.charCodeAt(0)-48;break}if("$"===r||'"'===r||" "===r||"'"===r){this.postfix=r;break}if(this.params.push(this.currentParam),this.currentParam=0,";"===r){break}switch(this.state=d,r){case"A":this.cursorUp(this.params);break;case"B":this.cursorDown(this.params);break;case"C":this.cursorForward(this.params);break;case"D":this.cursorBackward(this.params);break;case"H":this.cursorPos(this.params);break;case"J":this.eraseInDisplay(this.params);break;case"K":this.eraseInLine(this.params);break;case"m":this.prefix||this.charAttributes(this.params);break;case"n":this.prefix||this.deviceStatus(this.params);break;case"@":this.insertChars(this.params);break;case"E":this.cursorNextLine(this.params);break;case"F":this.cursorPrecedingLine(this.params);break;case"G":this.cursorCharAbsolute(this.params);break;case"L":this.insertLines(this.params);break;case"M":this.deleteLines(this.params);break;case"P":this.deleteChars(this.params);break;case"X":this.eraseChars(this.params);break;case"`":this.charPosAbsolute(this.params);break;case"a":this.HPositionRelative(this.params);break;case"c":this.sendDeviceAttributes(this.params);break;case"d":this.linePosAbsolute(this.params);break;case"e":this.VPositionRelative(this.params);break;case"f":this.HVPosition(this.params);break;case"h":this.setMode(this.params);break;case"l":this.resetMode(this.params);break;case"r":this.setScrollRegion(this.params);break;case"s":this.saveCursor(this.params);break;case"u":this.restoreCursor(this.params);break;case"I":this.cursorForwardTab(this.params);break;case"S":this.scrollUp(this.params);break;case"T":this.params.length<2&&!this.prefix&&this.scrollDown(this.params);break;case"Z":this.cursorBackwardTab(this.params);break;case"b":this.repeatPrecedingCharacter(this.params);break;case"g":this.tabClear(this.params);break;case"p":switch(this.prefix){case"!":this.softReset(this.params)}break;case"t":"$"===this.postfix?this.reverseAttrInRectangle(this.params):" "===this.postfix?this.setWarningBellVolume(this.params):">"===this.prefix?this.setTitleModeFeature(this.params):this.manipulateWindow(this.params);break;default:this.error("Unknown CSI code: %s.",r)}this.prefix="",this.postfix="";break;case k:if(""===this.lch&&"\\"===r||""===r){if("tmux;"===this.prefix&&""===r){this.currentParam+=r;continue}""===this.lch&&("string"==typeof this.currentParam?this.currentParam=this.currentParam.slice(0,-1):"number"==typeof this.currentParam&&(this.currentParam=(this.currentParam-("".charCodeAt(0)-48))/10)),this.params.push(this.currentParam);var h=this.params[this.params.length-1];switch(this.prefix){case x:this.emit("udk",{clearAll:0===this.params[0],eraseBelow:1===this.params[0],lockKeys:0===this.params[1],dontLockKeys:1===this.params[1],keyList:(this.params[2]+"").split(";").map(function(t){return t=t.split("/"),{keyCode:t[0],hexKeyValue:t[1]}})});break;case"$q":var n=0;switch(h){case'"q':h='0"q',n=1;break;case'"p':h='61;0"p',n=1;break;case"r":h=""+(this.scrollTop+1)+";"+(this.scrollBottom+1)+"r",n=1;break;case"m":n=0;break;default:this.error("Unknown DCS Pt: %s.",h),n=0}this.send("P"+n+"$r"+h+"\\");break;case"+p":this.emit("set terminfo",{name:this.params[0]});break;case"+q":var n=!1;this.send("P"+ +n+"+r"+h+"\\");break;case"tmux;":this.emit("passthrough",h);break;default:this.error("Unknown DCS prefix: %s.",h)}this.currentParam=0,this.prefix="",this.state=d}else{this.currentParam+=r,this.prefix||(/^\d*;\d*\|/.test(this.currentParam)?(this.prefix=x,this.params=this.currentParam.split(/[;|]/).map(function(t){return t.length?+t:0}).slice(0,-1),this.currentParam=""):(/^[$+][a-zA-Z]/.test(this.currentParam)||/^\w+;\x1b/.test(this.currentParam))&&(this.prefix=this.currentParam,this.currentParam=""))}break;case w:(""===this.lch&&"\\"===r||""===r)&&(this.state=d)}}return this.updateRange(this.y),this.refresh(this.refreshStart,this.refreshEnd),!0},s.prototype.writeln=function(t){return this.write(t+"\r\n")},s.prototype.end=function(t){var e=!0;return t&&(e=this.write(t)),this.destroySoon(),e},s.prototype.resume=function(){},s.prototype.pause=function(){},s.prototype.keyDown=function(t){var e,s=this;switch(t.keyCode){case 8:if(t.altKey){e="";break}if(t.shiftKey){e="\b";break}e="";break;case 9:if(t.shiftKey){e="[Z";break}e="	";break;case 13:e="\r";break;case 27:e="";break;case 37:if(this.applicationCursor){e="OD";break}if(t.ctrlKey){e="[5D";break}e="[D";break;case 39:if(this.applicationCursor){e="OC";break}if(t.ctrlKey){e="[5C";break}e="[C";break;case 38:if(this.applicationCursor){e="OA";break}if(t.ctrlKey){return this.scrollDisp(-1),o(t)}e="[A";break;case 40:if(this.applicationCursor){e="OB";break}if(t.ctrlKey){return this.scrollDisp(1),o(t)}e="[B";break;case 46:e="[3~";break;case 45:e="[2~";break;case 36:if(this.applicationKeypad){e="OH";break}e="OH";break;case 35:if(this.applicationKeypad){e="OF";break}e="OF";break;case 33:if(t.shiftKey){return this.scrollDisp(-(this.rows-1)),o(t)}e="[5~";break;case 34:if(t.shiftKey){return this.scrollDisp(this.rows-1),o(t)}e="[6~";break;case 112:e="OP";break;case 113:e="OQ";break;case 114:e="OR";break;case 115:e="OS";break;case 116:e="[15~";break;case 117:e="[17~";break;case 118:e="[18~";break;case 119:e="[19~";break;case 120:e="[20~";break;case 121:e="[21~";break;case 122:e="[23~";break;case 123:e="[24~";break;default:if(t.ctrlKey){if(t.keyCode>=65&&t.keyCode<=90){if(this.screenKeys&&!this.prefixMode&&!this.selectMode&&65===t.keyCode){return this.enterPrefix(),o(t)}if(this.prefixMode&&86===t.keyCode){return void this.leavePrefix()}if((this.prefixMode||this.selectMode)&&67===t.keyCode){return void(this.visualMode&&_(function(){s.leaveVisual()},1))}e=g.fromCharCode(t.keyCode-64)}else{32===t.keyCode?e=g.fromCharCode(0):t.keyCode>=51&&t.keyCode<=55?e=g.fromCharCode(t.keyCode-51+27):56===t.keyCode?e=g.fromCharCode(127):219===t.keyCode?e=g.fromCharCode(27):221===t.keyCode&&(e=g.fromCharCode(29))}}else{t.altKey&&(t.keyCode>=65&&t.keyCode<=90?e=""+g.fromCharCode(t.keyCode+32):192===t.keyCode?e="`":t.keyCode>=48&&t.keyCode<=57&&(e=""+(t.keyCode-48)))}}return e?this.prefixMode?(this.leavePrefix(),o(t)):this.selectMode?(this.keySelect(t,e),o(t)):(this.emit("keydown",t),this.emit("key",e,t),this.showCursor(),this.handler(e),o(t)):!0},s.prototype.setgLevel=function(t){this.glevel=t,this.charset=this.charsets[t]},s.prototype.setgCharset=function(t,e){this.charsets[t]=e,this.glevel===t&&(this.charset=e)},s.prototype.keyPress=function(t){var e;if(o(t),t.charCode){e=t.charCode}else{if(null==t.which){e=t.keyCode}else{if(0===t.which||0===t.charCode){return!1}e=t.which}}return!e||t.ctrlKey||t.altKey||t.metaKey?!1:(e=g.fromCharCode(e),this.prefixMode?(this.leavePrefix(),this.keyPrefix(t,e),!1):this.selectMode?(this.keySelect(t,e),!1):(this.emit("keypress",e,t),this.emit("key",e,t),this.showCursor(),this.handler(e),!1))},s.prototype.send=function(t){var e=this;this.queue||_(function(){e.handler(e.queue),e.queue=""},1),this.queue+=t},s.prototype.bell=function(){if(this.emit("bell"),this.visualBell){var t=this;this.element.style.borderColor="white",_(function(){t.element.style.borderColor=""},10),this.popOnBell&&this.focus()}},s.prototype.log=function(){if(this.debug&&this.context.console&&this.context.console.log){var t=Array.prototype.slice.call(arguments);this.context.console.log.apply(this.context.console,t)}},s.prototype.error=function(){if(this.debug&&this.context.console&&this.context.console.error){var t=Array.prototype.slice.call(arguments);this.context.console.error.apply(this.context.console,t)}},s.prototype.resize=function(t,e){var s,i,r,o,a;if(1>t&&(t=1),1>e&&(e=1),o=this.cols,t>o){for(a=[this.defAttr," "],r=this.lines.length;r--;){for(;this.lines[r].length<t;){this.lines[r].push(a)}}}else{if(o>t){for(r=this.lines.length;r--;){for(;this.lines[r].length>t;){this.lines[r].pop()}}}}if(this.setupStops(o),this.cols=t,this.columns=t,o=this.rows,e>o){for(i=this.element;o++<e;){this.lines.length<e+this.ybase&&this.lines.push(this.blankLine()),this.children.length<e&&(s=this.document.createElement("div"),i.appendChild(s),this.children.push(s))}}else{if(o>e){for(;o-->e;){if(this.lines.length>e+this.ybase&&this.lines.pop(),this.children.length>e){if(i=this.children.pop(),!i){continue}i.parentNode.removeChild(i)}}}}this.rows=e,this.y>=e&&(this.y=e-1),this.x>=t&&(this.x=t-1),this.scrollTop=0,this.scrollBottom=e-1,this.refresh(0,this.rows-1),this.normal=null,this.emit("resize")},s.prototype.updateRange=function(t){t<this.refreshStart&&(this.refreshStart=t),t>this.refreshEnd&&(this.refreshEnd=t)},s.prototype.maxRange=function(){this.refreshStart=0,this.refreshEnd=this.rows-1},s.prototype.setupStops=function(t){for(null!=t?this.tabs[t]||(t=this.prevStop(t)):(this.tabs={},t=0);t<this.cols;t+=8){this.tabs[t]=!0}},s.prototype.prevStop=function(t){for(null==t&&(t=this.x);!this.tabs[--t]&&t>0;){}return t>=this.cols?this.cols-1:0>t?0:t},s.prototype.nextStop=function(t){for(null==t&&(t=this.x);!this.tabs[++t]&&t<this.cols;){}return t>=this.cols?this.cols-1:0>t?0:t},s.prototype.eraseAttr=function(){return-512&this.defAttr|511&this.curAttr},s.prototype.eraseRight=function(t,e){for(var s=this.lines[this.ybase+e],i=[this.eraseAttr()," "];t<this.cols;t++){s[t]=i}this.updateRange(e)},s.prototype.eraseLeft=function(t,e){var s=this.lines[this.ybase+e],i=[this.eraseAttr()," "];for(t++;t--;){s[t]=i}this.updateRange(e)},s.prototype.eraseLine=function(t){this.eraseRight(0,t)},s.prototype.blankLine=function(t){for(var e=t?this.eraseAttr():this.defAttr,s=[e," "],i=[],r=0;r<this.cols;r++){i[r]=s}return i},s.prototype.ch=function(t){return t?[this.eraseAttr()," "]:[this.defAttr," "]},s.prototype.is=function(t){var e=this.termName;return 0===(e+"").indexOf(t)},s.prototype.handler=function(t){this.emit("data",t)},s.prototype.handleTitle=function(t){this.emit("title",t)},s.prototype.index=function(){this.y++,this.y>this.scrollBottom&&(this.y--,this.scroll()),this.state=d},s.prototype.reverseIndex=function(){var t;this.y--,this.y<this.scrollTop&&(this.y++,this.lines.splice(this.y+this.ybase,0,this.blankLine(!0)),t=this.rows-1-this.scrollBottom,this.lines.splice(this.rows-1+this.ybase-t+1,1),this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)),this.state=d},s.prototype.reset=function(){this.options.rows=this.rows,this.options.cols=this.cols,s.call(this,this.options),this.refresh(0,this.rows-1)},s.prototype.tabSet=function(){this.tabs[this.x]=!0,this.state=d},s.prototype.cursorUp=function(t){var e=t[0];1>e&&(e=1),this.y-=e,this.y<0&&(this.y=0)},s.prototype.cursorDown=function(t){var e=t[0];1>e&&(e=1),this.y+=e,this.y>=this.rows&&(this.y=this.rows-1)},s.prototype.cursorForward=function(t){var e=t[0];1>e&&(e=1),this.x+=e,this.x>=this.cols&&(this.x=this.cols-1)},s.prototype.cursorBackward=function(t){var e=t[0];1>e&&(e=1),this.x-=e,this.x<0&&(this.x=0)},s.prototype.cursorPos=function(t){var e,s;e=t[0]-1,s=t.length>=2?t[1]-1:0,0>e?e=0:e>=this.rows&&(e=this.rows-1),0>s?s=0:s>=this.cols&&(s=this.cols-1),this.x=s,this.y=e},s.prototype.eraseInDisplay=function(t){var e;switch(t[0]){case 0:for(this.eraseRight(this.x,this.y),e=this.y+1;e<this.rows;e++){this.eraseLine(e)}break;case 1:for(this.eraseLeft(this.x,this.y),e=this.y;e--;){this.eraseLine(e)}break;case 2:for(e=this.rows;e--;){this.eraseLine(e)}break;case 3:}},s.prototype.eraseInLine=function(t){switch(t[0]){case 0:this.eraseRight(this.x,this.y);break;case 1:this.eraseLeft(this.x,this.y);break;case 2:this.eraseLine(this.y)}},s.prototype.charAttributes=function(t){if(1===t.length&&0===t[0]){return void(this.curAttr=this.defAttr)}for(var e,s=t.length,i=0,r=this.curAttr>>18,o=this.curAttr>>9&511,a=511&this.curAttr;s>i;i++){e=t[i],e>=30&&37>=e?o=e-30:e>=40&&47>=e?a=e-40:e>=90&&97>=e?(e+=8,o=e-90):e>=100&&107>=e?(e+=8,a=e-100):0===e?(r=this.defAttr>>18,o=this.defAttr>>9&511,a=511&this.defAttr):1===e?r|=1:4===e?r|=2:5===e?r|=4:7===e?r|=8:8===e?r|=16:22===e?r&=-2:24===e?r&=-3:25===e?r&=-5:27===e?r&=-9:28===e?r&=-17:39===e?o=this.defAttr>>9&511:49===e?a=511&this.defAttr:38===e?2===t[i+1]?(i+=2,
o=c(255&t[i],255&t[i+1],255&t[i+2]),-1===o&&(o=511),i+=2):5===t[i+1]&&(i+=2,e=255&t[i],o=e):48===e?2===t[i+1]?(i+=2,a=c(255&t[i],255&t[i+1],255&t[i+2]),-1===a&&(a=511),i+=2):5===t[i+1]&&(i+=2,e=255&t[i],a=e):100===e?(o=this.defAttr>>9&511,a=511&this.defAttr):this.error("Unknown SGR attribute: %d.",e)}this.curAttr=r<<18|o<<9|a},s.prototype.deviceStatus=function(t){if(this.prefix){if("?"===this.prefix){switch(t[0]){case 6:this.send("[?"+(this.y+1)+";"+(this.x+1)+"R");break;case 15:break;case 25:break;case 26:break;case 53:}}}else{switch(t[0]){case 5:this.send("[0n");break;case 6:this.send("["+(this.y+1)+";"+(this.x+1)+"R")}}},s.prototype.insertChars=function(t){var e,s,i,r;for(e=t[0],1>e&&(e=1),s=this.y+this.ybase,i=this.x,r=[this.eraseAttr()," "];e--&&i<this.cols;){this.lines[s].splice(i++,0,r),this.lines[s].pop()}},s.prototype.cursorNextLine=function(t){var e=t[0];1>e&&(e=1),this.y+=e,this.y>=this.rows&&(this.y=this.rows-1),this.x=0},s.prototype.cursorPrecedingLine=function(t){var e=t[0];1>e&&(e=1),this.y-=e,this.y<0&&(this.y=0),this.x=0},s.prototype.cursorCharAbsolute=function(t){var e=t[0];1>e&&(e=1),this.x=e-1},s.prototype.insertLines=function(t){var e,s,i;for(e=t[0],1>e&&(e=1),s=this.y+this.ybase,i=this.rows-1-this.scrollBottom,i=this.rows-1+this.ybase-i+1;e--;){this.lines.splice(s,0,this.blankLine(!0)),this.lines.splice(i,1)}this.updateRange(this.y),this.updateRange(this.scrollBottom)},s.prototype.deleteLines=function(t){var e,s,i;for(e=t[0],1>e&&(e=1),s=this.y+this.ybase,i=this.rows-1-this.scrollBottom,i=this.rows-1+this.ybase-i;e--;){this.lines.splice(i+1,0,this.blankLine(!0)),this.lines.splice(s,1)}this.updateRange(this.y),this.updateRange(this.scrollBottom)},s.prototype.deleteChars=function(t){var e,s,i;for(e=t[0],1>e&&(e=1),s=this.y+this.ybase,i=[this.eraseAttr()," "];e--;){this.lines[s].splice(this.x,1),this.lines[s].push(i)}},s.prototype.eraseChars=function(t){var e,s,i,r;for(e=t[0],1>e&&(e=1),s=this.y+this.ybase,i=this.x,r=[this.eraseAttr()," "];e--&&i<this.cols;){this.lines[s][i++]=r}},s.prototype.charPosAbsolute=function(t){var e=t[0];1>e&&(e=1),this.x=e-1,this.x>=this.cols&&(this.x=this.cols-1)},s.prototype.HPositionRelative=function(t){var e=t[0];1>e&&(e=1),this.x+=e,this.x>=this.cols&&(this.x=this.cols-1)},s.prototype.sendDeviceAttributes=function(t){t[0]>0||(this.prefix?">"===this.prefix&&(this.is("xterm")?this.send("[>0;276;0c"):this.is("rxvt-unicode")?this.send("[>85;95;0c"):this.is("linux")?this.send(t[0]+"c"):this.is("screen")&&this.send("[>83;40003;0c")):this.is("xterm")||this.is("rxvt-unicode")||this.is("screen")?this.send("[?1;2c"):this.is("linux")&&this.send("[?6c"))},s.prototype.linePosAbsolute=function(t){var e=t[0];1>e&&(e=1),this.y=e-1,this.y>=this.rows&&(this.y=this.rows-1)},s.prototype.VPositionRelative=function(t){var e=t[0];1>e&&(e=1),this.y+=e,this.y>=this.rows&&(this.y=this.rows-1)},s.prototype.HVPosition=function(t){t[0]<1&&(t[0]=1),t[1]<1&&(t[1]=1),this.y=t[0]-1,this.y>=this.rows&&(this.y=this.rows-1),this.x=t[1]-1,this.x>=this.cols&&(this.x=this.cols-1)},s.prototype.setMode=function(t){if("object"!=typeof t){if(this.prefix){if("?"===this.prefix){switch(t){case 1:this.applicationCursor=!0;break;case 2:this.setgCharset(0,s.charsets.US),this.setgCharset(1,s.charsets.US),this.setgCharset(2,s.charsets.US),this.setgCharset(3,s.charsets.US);break;case 3:this.savedCols=this.cols,this.resize(132,this.rows);break;case 6:this.originMode=!0;break;case 7:this.wraparoundMode=!0;break;case 12:break;case 66:this.log("Serial port requested application keypad."),this.applicationKeypad=!0;break;case 9:case 1e3:case 1002:case 1003:this.x10Mouse=9===t,this.vt200Mouse=1e3===t,this.normalMouse=t>1e3,this.mouseEvents=!0,this.element.style.cursor="default",this.log("Binding to mouse events.");break;case 1004:this.sendFocus=!0;break;case 1005:this.utfMouse=!0;break;case 1006:this.sgrMouse=!0;break;case 1015:this.urxvtMouse=!0;break;case 25:this.cursorHidden=!1;break;case 1049:case 47:case 1047:if(!this.normal){var e={lines:this.lines,ybase:this.ybase,ydisp:this.ydisp,x:this.x,y:this.y,scrollTop:this.scrollTop,scrollBottom:this.scrollBottom,tabs:this.tabs};this.reset(),this.normal=e,this.showCursor()}}}}else{switch(t){case 4:this.insertMode=!0;break;case 20:}}}else{for(var i=t.length,r=0;i>r;r++){this.setMode(t[r])}}},s.prototype.resetMode=function(t){if("object"!=typeof t){if(this.prefix){if("?"===this.prefix){switch(t){case 1:this.applicationCursor=!1;break;case 3:132===this.cols&&this.savedCols&&this.resize(this.savedCols,this.rows),delete this.savedCols;break;case 6:this.originMode=!1;break;case 7:this.wraparoundMode=!1;break;case 12:break;case 66:this.log("Switching back to normal keypad."),this.applicationKeypad=!1;break;case 9:case 1e3:case 1002:case 1003:this.x10Mouse=!1,this.vt200Mouse=!1,this.normalMouse=!1,this.mouseEvents=!1,this.element.style.cursor="";break;case 1004:this.sendFocus=!1;break;case 1005:this.utfMouse=!1;break;case 1006:this.sgrMouse=!1;break;case 1015:this.urxvtMouse=!1;break;case 25:this.cursorHidden=!0;break;case 1049:case 47:case 1047:this.normal&&(this.lines=this.normal.lines,this.ybase=this.normal.ybase,this.ydisp=this.normal.ydisp,this.x=this.normal.x,this.y=this.normal.y,this.scrollTop=this.normal.scrollTop,this.scrollBottom=this.normal.scrollBottom,this.tabs=this.normal.tabs,this.normal=null,this.refresh(0,this.rows-1),this.showCursor())}}}else{switch(t){case 4:this.insertMode=!1;break;case 20:}}}else{for(var e=t.length,s=0;e>s;s++){this.resetMode(t[s])}}},s.prototype.setScrollRegion=function(t){this.prefix||(this.scrollTop=(t[0]||1)-1,this.scrollBottom=(t[1]||this.rows)-1,this.x=0,this.y=0)},s.prototype.saveCursor=function(t){this.savedX=this.x,this.savedY=this.y},s.prototype.restoreCursor=function(t){this.x=this.savedX||0,this.y=this.savedY||0},s.prototype.cursorForwardTab=function(t){for(var e=t[0]||1;e--;){this.x=this.nextStop()}},s.prototype.scrollUp=function(t){for(var e=t[0]||1;e--;){this.lines.splice(this.ybase+this.scrollTop,1),this.lines.splice(this.ybase+this.scrollBottom,0,this.blankLine())}this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)},s.prototype.scrollDown=function(t){for(var e=t[0]||1;e--;){this.lines.splice(this.ybase+this.scrollBottom,1),this.lines.splice(this.ybase+this.scrollTop,0,this.blankLine())}this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)},s.prototype.initMouseTracking=function(t){},s.prototype.resetTitleModes=function(t){},s.prototype.cursorBackwardTab=function(t){for(var e=t[0]||1;e--;){this.x=this.prevStop()}},s.prototype.repeatPrecedingCharacter=function(t){for(var e=t[0]||1,s=this.lines[this.ybase+this.y],i=s[this.x-1]||[this.defAttr," "];e--;){s[this.x++]=i}},s.prototype.tabClear=function(t){var e=t[0];0>=e?delete this.tabs[this.x]:3===e&&(this.tabs={})},s.prototype.mediaCopy=function(t){},s.prototype.setResources=function(t){},s.prototype.disableModifiers=function(t){},s.prototype.setPointerMode=function(t){},s.prototype.softReset=function(t){this.cursorHidden=!1,this.insertMode=!1,this.originMode=!1,this.wraparoundMode=!1,this.applicationKeypad=!1,this.applicationCursor=!1,this.scrollTop=0,this.scrollBottom=this.rows-1,this.curAttr=this.defAttr,this.x=this.y=0,this.charset=null,this.glevel=0,this.charsets=[null]},s.prototype.requestAnsiMode=function(t){},s.prototype.requestPrivateMode=function(t){},s.prototype.setConformanceLevel=function(t){},s.prototype.loadLEDs=function(t){},s.prototype.setCursorStyle=function(t){},s.prototype.setCharProtectionAttr=function(t){},s.prototype.restorePrivateValues=function(t){},s.prototype.setAttrInRectangle=function(t){for(var e,s,i=t[0],r=t[1],o=t[2],a=t[3],h=t[4];o+1>i;i++){for(e=this.lines[this.ybase+i],s=r;a>s;s++){e[s]=[h,e[s][1]]}}this.updateRange(t[0]),this.updateRange(t[2])},s.prototype.savePrivateValues=function(t){},s.prototype.manipulateWindow=function(t){3==t.length&&8==t[0]&&this.resize(t[2],t[1])},s.prototype.reverseAttrInRectangle=function(t){},s.prototype.setTitleModeFeature=function(t){},s.prototype.setWarningBellVolume=function(t){},s.prototype.setMarginBellVolume=function(t){},s.prototype.copyRectangle=function(t){},s.prototype.enableFilterRectangle=function(t){},s.prototype.requestParameters=function(t){},s.prototype.selectChangeExtent=function(t){},s.prototype.fillRectangle=function(t){for(var e,s,i=t[0],r=t[1],o=t[2],a=t[3],h=t[4];a+1>r;r++){for(e=this.lines[this.ybase+r],s=o;h>s;s++){e[s]=[e[s][0],g.fromCharCode(i)]}}this.updateRange(t[1]),this.updateRange(t[3])},s.prototype.enableLocatorReporting=function(t){t[0]>0},s.prototype.eraseRectangle=function(t){var e,s,i,r=t[0],o=t[1],a=t[2],h=t[3];for(i=[this.eraseAttr()," "];a+1>r;r++){for(e=this.lines[this.ybase+r],s=o;h>s;s++){e[s]=i}}this.updateRange(t[0]),this.updateRange(t[2])},s.prototype.setLocatorEvents=function(t){},s.prototype.selectiveEraseRectangle=function(t){},s.prototype.requestLocatorPosition=function(t){},s.prototype.insertColumns=function(){for(var t,e=params[0],s=this.ybase+this.rows,i=[this.eraseAttr()," "];e--;){for(t=this.ybase;s>t;t++){this.lines[t].splice(this.x+1,0,i),this.lines[t].pop()}}this.maxRange()},s.prototype.deleteColumns=function(){for(var t,e=params[0],s=this.ybase+this.rows,i=[this.eraseAttr()," "];e--;){for(t=this.ybase;s>t;t++){this.lines[t].splice(this.x,1),this.lines[t].push(i)}}this.maxRange()},s.prototype.enterPrefix=function(){this.prefixMode=!0},s.prototype.leavePrefix=function(){this.prefixMode=!1},s.prototype.enterSelect=function(){this._real={x:this.x,y:this.y,ydisp:this.ydisp,ybase:this.ybase,cursorHidden:this.cursorHidden,lines:this.copyBuffer(this.lines),write:this.write},this.write=function(){},this.selectMode=!0,this.visualMode=!1,this.cursorHidden=!1,this.refresh(this.y,this.y)},s.prototype.leaveSelect=function(){this.x=this._real.x,this.y=this._real.y,this.ydisp=this._real.ydisp,this.ybase=this._real.ybase,this.cursorHidden=this._real.cursorHidden,this.lines=this._real.lines,this.write=this._real.write,delete this._real,this.selectMode=!1,this.visualMode=!1,this.refresh(0,this.rows-1)},s.prototype.enterVisual=function(){this._real.preVisual=this.copyBuffer(this.lines),this.selectText(this.x,this.x,this.ydisp+this.y,this.ydisp+this.y),this.visualMode=!0},s.prototype.leaveVisual=function(){this.lines=this._real.preVisual,delete this._real.preVisual,delete this._selected,this.visualMode=!1,this.refresh(0,this.rows-1)},s.prototype.enterSearch=function(t){this.entry="",this.searchMode=!0,this.searchDown=t,this._real.preSearch=this.copyBuffer(this.lines),this._real.preSearchX=this.x,this._real.preSearchY=this.y;for(var e=this.ydisp+this.rows-1,s=0;s<this.entryPrefix.length;s++){this.lines[e][s]=[-512&this.defAttr|4,this.entryPrefix[s]]}this.y=this.rows-1,this.x=this.entryPrefix.length,this.refresh(this.rows-1,this.rows-1)},s.prototype.leaveSearch=function(){this.searchMode=!1,this._real.preSearch&&(this.lines=this._real.preSearch,this.x=this._real.preSearchX,this.y=this._real.preSearchY,delete this._real.preSearch,delete this._real.preSearchX,delete this._real.preSearchY),this.refresh(this.rows-1,this.rows-1)},s.prototype.copyBuffer=function(t){for(var t=t||this.lines,e=[],s=0;s<t.length;s++){e[s]=[];for(var i=0;i<t[s].length;i++){e[s][i]=[t[s][i][0],t[s][i][1]]}}return e},s.prototype.getCopyTextarea=function(t){var e=this._copyTextarea,s=this.document;return e||(e=s.createElement("textarea"),e.style.position="absolute",e.style.left="-32000px",e.style.top="-32000px",e.style.width="0px",e.style.height="0px",e.style.opacity="0",e.style.backgroundColor="transparent",e.style.borderStyle="none",e.style.outlineStyle="none",s.getElementsByTagName("body")[0].appendChild(e),this._copyTextarea=e),e},s.prototype.copyText=function(t){var e=this,s=this.getCopyTextarea();this.emit("copy",t),s.focus(),s.textContent=t,s.value=t,s.setSelectionRange(0,t.length),_(function(){e.element.focus(),e.focus()},1)},s.prototype.selectText=function(t,e,s,i){var r,o,a,h,n,l,c,u,f;if(this._selected){for(r=this._selected.x1,o=this._selected.x2,a=this._selected.y1,h=this._selected.y2,a>h&&(n=o,o=r,r=n,n=h,h=a,a=n),r>o&&a===h&&(n=o,o=r,r=n),c=a;h>=c;c++){for(l=0,u=this.cols-1,c===a&&(l=r),c===h&&(u=o);u>=l;l++){null!=this.lines[c][l].old&&(f=this.lines[c][l].old,delete this.lines[c][l].old,this.lines[c][l]=[f,this.lines[c][l][1]])}}s=this._selected.y1,t=this._selected.x1}for(s=Math.max(s,0),s=Math.min(s,this.ydisp+this.rows-1),i=Math.max(i,0),i=Math.min(i,this.ydisp+this.rows-1),this._selected={x1:t,x2:e,y1:s,y2:i},s>i&&(n=e,e=t,t=n,n=i,i=s,s=n),t>e&&s===i&&(n=e,e=t,t=n),c=s;i>=c;c++){for(l=0,u=this.cols-1,c===s&&(l=t),c===i&&(u=e);u>=l;l++){f=this.lines[c][l][0],this.lines[c][l]=[-512&f|261636,this.lines[c][l][1]],this.lines[c][l].old=f}}s-=this.ydisp,i-=this.ydisp,s=Math.max(s,0),s=Math.min(s,this.rows-1),i=Math.max(i,0),i=Math.min(i,this.rows-1),this.refresh(0,this.rows-1)},s.prototype.grabText=function(t,e,s,i){var r,o,a,h,n,c="",u="";for(s>i&&(n=e,e=t,t=n,n=i,i=s,s=n),t>e&&s===i&&(n=e,e=t,t=n),a=s;i>=a;a++){for(o=0,h=this.cols-1,a===s&&(o=t),a===i&&(h=e);h>=o;o++){r=this.lines[a][o][1]," "!==r?(u&&(c+=u,u=""),c+=r,l(r)&&o++):u+=r}u="",c+="\n"}for(o=e,a=i;o<this.cols;o++){if(" "!==this.lines[a][o][1]){c=c.slice(0,-1);break}}return c},s.prototype.keyPrefix=function(t,e){"k"===e||"&"===e?this.destroy():"p"===e||"]"===e?this.emit("request paste"):"c"===e?this.emit("request create"):e>="0"&&"9">=e?(e=+e-1,~e||(e=9),this.emit("request term",e)):"n"===e?this.emit("request term next"):"P"===e?this.emit("request term previous"):":"===e?this.emit("request command mode"):"["===e&&this.enterSelect()},s.prototype.keySelect=function(t,e){if(this.showCursor(),this.searchMode||"n"===e||"N"===e){return this.keySearch(t,e)}if(""===e){var s=this.ydisp+this.y;return this.ydisp===this.ybase?(this.y=Math.min(this.y+(this.rows-1)/2|0,this.rows-1),this.refresh(0,this.rows-1)):this.scrollDisp((this.rows-1)/2|0),void(this.visualMode&&this.selectText(this.x,this.x,s,this.ydisp+this.y))}if(""===e){var s=this.ydisp+this.y;return 0===this.ydisp?(this.y=Math.max(this.y-(this.rows-1)/2|0,0),this.refresh(0,this.rows-1)):this.scrollDisp(-(this.rows-1)/2|0),void(this.visualMode&&this.selectText(this.x,this.x,s,this.ydisp+this.y))}if(""===e){var s=this.ydisp+this.y;return this.scrollDisp(this.rows-1),void(this.visualMode&&this.selectText(this.x,this.x,s,this.ydisp+this.y))}if(""===e){var s=this.ydisp+this.y;return this.scrollDisp(-(this.rows-1)),void(this.visualMode&&this.selectText(this.x,this.x,s,this.ydisp+this.y))}if("k"===e||"[A"===e){var s=this.ydisp+this.y;return this.y--,this.y<0&&(this.y=0,this.scrollDisp(-1)),void(this.visualMode?this.selectText(this.x,this.x,s,this.ydisp+this.y):this.refresh(this.y,this.y+1))}if("j"===e||"[B"===e){var s=this.ydisp+this.y;return this.y++,this.y>=this.rows&&(this.y=this.rows-1,this.scrollDisp(1)),void(this.visualMode?this.selectText(this.x,this.x,s,this.ydisp+this.y):this.refresh(this.y-1,this.y))}if("h"===e||"[D"===e){var i=this.x;return this.x--,this.x<0&&(this.x=0),void(this.visualMode?this.selectText(i,this.x,this.ydisp+this.y,this.ydisp+this.y):this.refresh(this.y,this.y))}if("l"===e||"[C"===e){var i=this.x;return this.x++,this.x>=this.cols&&(this.x=this.cols-1),void(this.visualMode?this.selectText(i,this.x,this.ydisp+this.y,this.ydisp+this.y):this.refresh(this.y,this.y))}if("v"===e||" "===e){return void(this.visualMode?this.leaveVisual():this.enterVisual())}if("y"!==e){if("q"===e||""===e){return void(this.visualMode?this.leaveVisual():this.leaveSelect())}if("w"===e||"W"===e){for(var r=this.x,o=this.y,a=this.ydisp,i=this.x,s=this.y,h=this.ydisp,n=!1;;){for(var l=this.lines[h+s];i<this.cols;){if(l[i][1]<=" "){n=!0}else{if(n){break}}i++}if(i>=this.cols&&(i=this.cols-1),!(i===this.cols-1&&l[i][1]<=" ")){break}if(i=0,++s>=this.rows&&(s--,++h>this.ybase)){h=this.ybase,i=this.x;break}}return this.x=i,this.y=s,this.scrollDisp(-this.ydisp+h),void(this.visualMode&&this.selectText(r,this.x,o+a,this.ydisp+this.y))}if("b"===e||"B"===e){for(var r=this.x,o=this.y,a=this.ydisp,i=this.x,s=this.y,h=this.ydisp;;){for(var l=this.lines[h+s],n=i>0&&l[i][1]>" "&&l[i-1][1]>" ";i>=0;){if(l[i][1]<=" "){if(n&&i+1<this.cols&&l[i+1][1]>" "){i++;break}n=!0}i--}if(0>i&&(i=0),0!==i||!(l[i][1]<=" ")&&n){break}if(i=this.cols-1,--s<0&&(s++,--h<0)){h++,i=0;break}}return this.x=i,this.y=s,this.scrollDisp(-this.ydisp+h),void(this.visualMode&&this.selectText(r,this.x,o+a,this.ydisp+this.y))}if("e"===e||"E"===e){var i=this.x+1,s=this.y,h=this.ydisp;for(i>=this.cols&&i--;;){for(var l=this.lines[h+s];i<this.cols&&l[i][1]<=" ";){i++}for(;i<this.cols;){if(l[i][1]<=" "&&i-1>=0&&l[i-1][1]>" "){i--;break}i++}if(i>=this.cols&&(i=this.cols-1),!(i===this.cols-1&&l[i][1]<=" ")){break}if(i=0,++s>=this.rows&&(s--,++h>this.ybase)){h=this.ybase;break}}return this.x=i,this.y=s,this.scrollDisp(-this.ydisp+h),void(this.visualMode&&this.selectText(r,this.x,o+a,this.ydisp+this.y))}if("^"===e||"0"===e){var r=this.x;if("0"===e){this.x=0}else{if("^"===e){for(var l=this.lines[this.ydisp+this.y],i=0;i<this.cols&&!(l[i][1]>" ");){i++}i>=this.cols&&(i=this.cols-1),this.x=i}}return void(this.visualMode?this.selectText(r,this.x,this.ydisp+this.y,this.ydisp+this.y):this.refresh(this.y,this.y))}if("$"===e){for(var r=this.x,l=this.lines[this.ydisp+this.y],i=this.cols-1;i>=0;){if(l[i][1]>" "){this.visualMode&&i<this.cols-1&&i++;break}i--}return 0>i&&(i=0),this.x=i,void(this.visualMode?this.selectText(r,this.x,this.ydisp+this.y,this.ydisp+this.y):this.refresh(this.y,this.y))}if("g"===e||"G"===e){var r=this.x,o=this.y,a=this.ydisp;return"g"===e?(this.x=0,this.y=0,this.scrollDisp(-this.ydisp)):"G"===e&&(this.x=0,this.y=this.rows-1,this.scrollDisp(this.ybase)),void(this.visualMode&&this.selectText(r,this.x,o+a,this.ydisp+this.y))}if("H"===e||"M"===e||"L"===e){var r=this.x,o=this.y;return"H"===e?(this.x=0,this.y=0):"M"===e?(this.x=0,this.y=this.rows/2|0):"L"===e&&(this.x=0,this.y=this.rows-1),void(this.visualMode?this.selectText(r,this.x,this.ydisp+o,this.ydisp+this.y):(this.refresh(o,o),this.refresh(this.y,this.y)))}if("{"===e||"}"===e){var l,c,r=this.x,o=this.y,a=this.ydisp,u=!1,f=!1,p=-1,s=this.y+("{"===e?-1:1),h=this.ydisp;for("{"===e?0>s&&(s++,h>0&&h--):"}"===e&&s>=this.rows&&(s--,h<this.ybase&&h++);;){for(l=this.lines[h+s],c=0;c<this.cols;c++){if(l[c][1]>" "){-1===p&&(p=0),u=!0;break}if(c===this.cols-1){-1===p?p=1:0===p?f=!0:1===p&&u&&(f=!0);break}}if(f){break}if("{"===e){if(s--,0>s){if(s++,!(h>0)){break}h--}}else{if("}"===e&&(s++,s>=this.rows)){if(s--,!(h<this.ybase)){break}h++}}}return f||("{"===e?(s=0,h=0):"}"===e&&(s=this.rows-1,h=this.ybase)),this.x=0,this.y=s,this.scrollDisp(-this.ydisp+h),void(this.visualMode&&this.selectText(r,this.x,o+a,this.ydisp+this.y))}return"/"===e||"?"===e?void(this.visualMode||this.enterSearch("/"===e)):!1}if(this.visualMode){var d=this.grabText(this._selected.x1,this._selected.x2,this._selected.y1,this._selected.y2);this.copyText(d),this.leaveVisual()}},s.prototype.keySearch=function(t,e){if(""===e){return void this.leaveSearch()}if("\r"===e||!this.searchMode&&("n"===e||"N"===e)){this.leaveSearch();var s=this.entry;if(!s){return void this.refresh(0,this.rows-1)}for(var i,r,o,a=this.x,h=this.y,n=this.ydisp,l=!1,c=!1,u=this.x+1,f=this.ydisp+this.y,p="N"===e?this.searchDown:!this.searchDown;;){for(i=this.lines[f];u<this.cols;){for(o=0;o<s.length&&!(u+o>=this.cols)&&i[u+o][1]===s[o];o++){if(i[u+o][1]===s[o]&&o===s.length-1){l=!0;break}}if(l){break}u+=o+1}if(l){break}if(u=0,p){if(f--,0>f){if(c){break}c=!0,f=this.ybase+this.rows-1}}else{if(f++,f>this.ybase+this.rows-1){if(c){break}c=!0,f=0}}}return l?(f-this.ybase<0?(r=f,f=0,r>this.ybase&&(f=r-this.ybase,r=this.ybase)):(r=this.ybase,f-=this.ybase),this.x=u,this.y=f,this.scrollDisp(-this.ydisp+r),void(this.visualMode&&this.selectText(a,this.x,h+n,this.ydisp+this.y))):void this.refresh(0,this.rows-1)}if("\b"===e||""===e){if(0===this.entry.length){return}var d=this.ydisp+this.rows-1;this.entry=this.entry.slice(0,-1);var o=this.entryPrefix.length+this.entry.length;return this.lines[d][o]=[this.lines[d][o][0]," "],this.x--,this.refresh(this.rows-1,this.rows-1),void this.refresh(this.y,this.y)}if(1===e.length&&e>=" "&&"~">=e){var d=this.ydisp+this.rows-1;this.entry+=e;var o=this.entryPrefix.length+this.entry.length-1;return this.lines[d][o]=[-512&this.defAttr|4,e],this.x++,this.refresh(this.rows-1,this.rows-1),void this.refresh(this.y,this.y)}return!1},s.charsets={},s.charsets.SCLD={"`":"◆",a:"▒",b:"	",c:"\f",d:"\r",e:"\n",f:"°",g:"±",h:"␤",i:"",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},s.charsets.UK=null,s.charsets.US=null,s.charsets.Dutch=null,s.charsets.Finnish=null,s.charsets.French=null,s.charsets.FrenchCanadian=null,s.charsets.German=null,s.charsets.Italian=null,s.charsets.NorwegianDanish=null,s.charsets.Spanish=null,s.charsets.Swedish=null,s.charsets.Swiss=null,s.charsets.ISOLatin=null;var g=this.String,_=this.setTimeout,C=this.setInterval;c._cache={},c.distance=function(t,e,s,i,r,o){return Math.pow(30*(t-i),2)+Math.pow(59*(e-r),2)+Math.pow(11*(s-o),2)},s.EventEmitter=t,s.Stream=e,s.inherits=a,s.on=i,s.off=r,s.cancel=o,"undefined"!=typeof module?module.exports=s:this.Terminal=s}).call(function(){return this||("undefined"!=typeof window?window:global)}()),function(t){if("object"==typeof exports&&"undefined"!=typeof module){module.exports=t()}else{if("function"==typeof define&&define.amd){define([],t)}else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.pako=t()}}}(function(){return function t(e,s,i){function r(a,h){if(!s[a]){if(!e[a]){var n="function"==typeof require&&require;if(!h&&n){return n(a,!0)}if(o){return o(a,!0)}var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=s[a]={exports:{}};e[a][0].call(c.exports,function(t){var s=e[a][1][t];return r(s?s:t)},c,c.exports,t,e,s,i)}return s[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++){r(i[a])}return r}({1:[function(t,e,s){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;s.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var s=e.shift();if(s){if("object"!=typeof s){throw new TypeError(s+"must be non-object")}for(var i in s){s.hasOwnProperty(i)&&(t[i]=s[i])}}}return t},s.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,s,i,r){if(e.subarray&&t.subarray){return void t.set(e.subarray(s,s+i),r)}for(var o=0;i>o;o++){t[r+o]=e[s+o]}},flattenChunks:function(t){var e,s,i,r,o,a;for(i=0,e=0,s=t.length;s>e;e++){i+=t[e].length}for(a=new Uint8Array(i),r=0,e=0,s=t.length;s>e;e++){o=t[e],a.set(o,r),r+=o.length}return a}},o={arraySet:function(t,e,s,i,r){for(var o=0;i>o;o++){t[r+o]=e[s+o]}},flattenChunks:function(t){return[].concat.apply([],t)}};s.setTyped=function(t){t?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,r)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,o))},s.setTyped(i)},{}],2:[function(t,e,s){"use strict";function i(t,e){if(65537>e&&(t.subarray&&a||!t.subarray&&o)){return String.fromCharCode.apply(null,r.shrinkBuf(t,e))}for(var s="",i=0;e>i;i++){s+=String.fromCharCode(t[i])}return s}var r=t("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(h){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(h){a=!1}for(var n=new r.Buf8(256),l=0;256>l;l++){n[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1}n[254]=n[254]=1,s.string2buf=function(t){var e,s,i,o,a,h=t.length,n=0;for(o=0;h>o;o++){s=t.charCodeAt(o),55296===(64512&s)&&h>o+1&&(i=t.charCodeAt(o+1),56320===(64512&i)&&(s=65536+(s-55296<<10)+(i-56320),o++)),n+=128>s?1:2048>s?2:65536>s?3:4}for(e=new r.Buf8(n),a=0,o=0;n>a;o++){s=t.charCodeAt(o),55296===(64512&s)&&h>o+1&&(i=t.charCodeAt(o+1),56320===(64512&i)&&(s=65536+(s-55296<<10)+(i-56320),o++)),128>s?e[a++]=s:2048>s?(e[a++]=192|s>>>6,e[a++]=128|63&s):65536>s?(e[a++]=224|s>>>12,e[a++]=128|s>>>6&63,e[a++]=128|63&s):(e[a++]=240|s>>>18,e[a++]=128|s>>>12&63,e[a++]=128|s>>>6&63,e[a++]=128|63&s)}return e},s.buf2binstring=function(t){return i(t,t.length)},s.binstring2buf=function(t){for(var e=new r.Buf8(t.length),s=0,i=e.length;i>s;s++){e[s]=t.charCodeAt(s)}return e},s.buf2string=function(t,e){var s,r,o,a,h=e||t.length,l=new Array(2*h);for(r=0,s=0;h>s;){if(o=t[s++],128>o){l[r++]=o}else{if(a=n[o],a>4){l[r++]=65533,s+=a-1}else{for(o&=2===a?31:3===a?15:7;a>1&&h>s;){o=o<<6|63&t[s++],a--}a>1?l[r++]=65533:65536>o?l[r++]=o:(o-=65536,l[r++]=55296|o>>10&1023,l[r++]=56320|1023&o)}}}return i(l,r)},s.utf8border=function(t,e){var s;for(e=e||t.length,e>t.length&&(e=t.length),s=e-1;s>=0&&128===(192&t[s]);){s--}return 0>s?e:0===s?e:s+n[t[s]]>e?s:e}},{"./common":1}],3:[function(t,e,s){"use strict";function i(t,e,s,i){for(var r=65535&t|0,o=t>>>16&65535|0,a=0;0!==s;){a=s>2e3?2e3:s,s-=a;do{r=r+e[i++]|0,o=o+r|0}while(--a);r%=65521,o%=65521}return r|o<<16|0}e.exports=i},{}],4:[function(t,e,s){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],5:[function(t,e,s){"use strict";function i(){for(var t,e=[],s=0;256>s;s++){t=s;for(var i=0;8>i;i++){t=1&t?3988292384^t>>>1:t>>>1}e[s]=t}return e}function r(t,e,s,i){var r=o,a=i+s;t=-1^t;for(var h=i;a>h;h++){t=t>>>8^r[255&(t^e[h])]}return-1^t}var o=i();e.exports=r},{}],6:[function(t,e,s){"use strict";function i(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=i},{}],7:[function(t,e,s){"use strict";var i=30,r=12;e.exports=function(t,e){var s,o,a,h,n,l,c,u,f,p,d,y,m,b,v,k,w,x,g,_,C,M,S,T,A;s=t.state,o=t.next_in,T=t.input,a=o+(t.avail_in-5),h=t.next_out,A=t.output,n=h-(e-t.avail_out),l=h+(t.avail_out-257),c=s.dmax,u=s.wsize,f=s.whave,p=s.wnext,d=s.window,y=s.hold,m=s.bits,b=s.lencode,v=s.distcode,k=(1<<s.lenbits)-1,w=(1<<s.distbits)-1;t:do{15>m&&(y+=T[o++]<<m,m+=8,y+=T[o++]<<m,m+=8),x=b[y&k];e:for(;;){if(g=x>>>24,y>>>=g,m-=g,g=x>>>16&255,0===g){A[h++]=65535&x}else{if(!(16&g)){if(0===(64&g)){x=b[(65535&x)+(y&(1<<g)-1)];continue e}if(32&g){s.mode=r;break t}t.msg="invalid literal/length code",s.mode=i;break t}_=65535&x,g&=15,g&&(g>m&&(y+=T[o++]<<m,m+=8),_+=y&(1<<g)-1,y>>>=g,m-=g),15>m&&(y+=T[o++]<<m,m+=8,y+=T[o++]<<m,m+=8),x=v[y&w];s:for(;;){if(g=x>>>24,y>>>=g,m-=g,g=x>>>16&255,!(16&g)){if(0===(64&g)){x=v[(65535&x)+(y&(1<<g)-1)];continue s}t.msg="invalid distance code",s.mode=i;break t}if(C=65535&x,g&=15,g>m&&(y+=T[o++]<<m,m+=8,g>m&&(y+=T[o++]<<m,m+=8)),C+=y&(1<<g)-1,C>c){t.msg="invalid distance too far back",s.mode=i;break t}if(y>>>=g,m-=g,g=h-n,C>g){if(g=C-g,g>f&&s.sane){t.msg="invalid distance too far back",s.mode=i;break t}if(M=0,S=d,0===p){if(M+=u-g,_>g){_-=g;do{A[h++]=d[M++]}while(--g);M=h-C,S=A}}else{if(g>p){if(M+=u+p-g,g-=p,_>g){_-=g;do{A[h++]=d[M++]}while(--g);if(M=0,_>p){g=p,_-=g;do{A[h++]=d[M++]}while(--g);M=h-C,S=A}}}else{if(M+=p-g,_>g){_-=g;do{A[h++]=d[M++]}while(--g);M=h-C,S=A}}}for(;_>2;){A[h++]=S[M++],A[h++]=S[M++],A[h++]=S[M++],_-=3}_&&(A[h++]=S[M++],_>1&&(A[h++]=S[M++]))}else{M=h-C;do{A[h++]=A[M++],A[h++]=A[M++],A[h++]=A[M++],_-=3}while(_>2);_&&(A[h++]=A[M++],_>1&&(A[h++]=A[M++]))}break}}break}}while(a>o&&l>h);_=m>>3,o-=_,m-=_<<3,y&=(1<<m)-1,t.next_in=o,t.next_out=h,t.avail_in=a>o?5+(a-o):5-(o-a),t.avail_out=l>h?257+(l-h):257-(h-l),s.hold=y,s.bits=m}},{}],8:[function(t,e,s){"use strict";function i(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function r(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new b.Buf16(320),this.work=new b.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=F,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new b.Buf32(dt),e.distcode=e.distdyn=new b.Buf32(yt),e.sane=1,e.back=-1,A):E}function a(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,o(t)):E}function h(t,e){var s,i;return t&&t.state?(i=t.state,0>e?(s=0,e=-e):(s=(e>>4)+1,48>e&&(e&=15)),e&&(8>e||e>15)?E:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=s,i.wbits=e,a(t))):E}function n(t,e){var s,i;return t?(i=new r,t.state=i,i.window=null,s=h(t,e),s!==A&&(t.state=null),s):E}function l(t){return n(t,bt)}function c(t){if(vt){var e;for(y=new b.Buf32(512),m=new b.Buf32(32),e=0;144>e;){t.lens[e++]=8}for(;256>e;){t.lens[e++]=9}for(;280>e;){t.lens[e++]=7}for(;288>e;){t.lens[e++]=8}for(x(_,t.lens,0,288,y,0,t.work,{bits:9}),e=0;32>e;){t.lens[e++]=5}x(C,t.lens,0,32,m,0,t.work,{bits:5}),vt=!1}t.lencode=y,t.lenbits=9,t.distcode=m,t.distbits=5}function u(t,e,s,i){var r,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new b.Buf8(o.wsize)),i>=o.wsize?(b.arraySet(o.window,e,s-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(r=o.wsize-o.wnext,r>i&&(r=i),b.arraySet(o.window,e,s-i,r,o.wnext),i-=r,i?(b.arraySet(o.window,e,s-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0}function f(t,e){var s,r,o,a,h,n,l,f,p,d,y,m,dt,yt,mt,bt,vt,kt,wt,xt,gt,_t,Ct,Mt,St=0,Tt=new b.Buf8(4),At=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in){return E}s=t.state,s.mode===Y&&(s.mode=W),h=t.next_out,o=t.output,l=t.avail_out,a=t.next_in,r=t.input,n=t.avail_in,f=s.hold,p=s.bits,d=n,y=l,_t=A;t:for(;;){switch(s.mode){case F:if(0===s.wrap){s.mode=W;break}for(;16>p;){if(0===n){break t}n--,f+=r[a++]<<p,p+=8}if(2&s.wrap&&35615===f){s.check=0,Tt[0]=255&f,Tt[1]=f>>>8&255,s.check=k(s.check,Tt,2,0),f=0,p=0,s.mode=O;break}if(s.flags=0,s.head&&(s.head.done=!1),!(1&s.wrap)||(((255&f)<<8)+(f>>8))%31){t.msg="incorrect header check",s.mode=ut;break}if((15&f)!==N){t.msg="unknown compression method",s.mode=ut;break}if(f>>>=4,p-=4,gt=(15&f)+8,0===s.wbits){s.wbits=gt}else{if(gt>s.wbits){t.msg="invalid window size",s.mode=ut;break}}s.dmax=1<<gt,t.adler=s.check=1,s.mode=512&f?V:Y,f=0,p=0;break;case O:for(;16>p;){if(0===n){break t}n--,f+=r[a++]<<p,p+=8}if(s.flags=f,(255&s.flags)!==N){t.msg="unknown compression method",s.mode=ut;break}if(57344&s.flags){t.msg="unknown header flags set",s.mode=ut;break}s.head&&(s.head.text=f>>8&1),512&s.flags&&(Tt[0]=255&f,Tt[1]=f>>>8&255,s.check=k(s.check,Tt,2,0)),f=0,p=0,s.mode=I;case I:for(;32>p;){if(0===n){break t}n--,f+=r[a++]<<p,p+=8}s.head&&(s.head.time=f),512&s.flags&&(Tt[0]=255&f,Tt[1]=f>>>8&255,Tt[2]=f>>>16&255,Tt[3]=f>>>24&255,s.check=k(s.check,Tt,4,0)),f=0,p=0,s.mode=z;case z:for(;16>p;){if(0===n){break t}n--,f+=r[a++]<<p,p+=8}s.head&&(s.head.xflags=255&f,s.head.os=f>>8),512&s.flags&&(Tt[0]=255&f,Tt[1]=f>>>8&255,s.check=k(s.check,Tt,2,0)),f=0,p=0,s.mode=H;case H:if(1024&s.flags){for(;16>p;){if(0===n){break t}n--,f+=r[a++]<<p,p+=8}s.length=f,s.head&&(s.head.extra_len=f),512&s.flags&&(Tt[0]=255&f,Tt[1]=f>>>8&255,s.check=k(s.check,Tt,2,0)),f=0,p=0}else{s.head&&(s.head.extra=null)}s.mode=Z;case Z:if(1024&s.flags&&(m=s.length,m>n&&(m=n),m&&(s.head&&(gt=s.head.extra_len-s.length,s.head.extra||(s.head.extra=new Array(s.head.extra_len)),b.arraySet(s.head.extra,r,a,m,gt)),512&s.flags&&(s.check=k(s.check,r,m,a)),
n-=m,a+=m,s.length-=m),s.length)){break t}s.length=0,s.mode=K;case K:if(2048&s.flags){if(0===n){break t}m=0;do{gt=r[a+m++],s.head&&gt&&s.length<65536&&(s.head.name+=String.fromCharCode(gt))}while(gt&&n>m);if(512&s.flags&&(s.check=k(s.check,r,m,a)),n-=m,a+=m,gt){break t}}else{s.head&&(s.head.name=null)}s.length=0,s.mode=U;case U:if(4096&s.flags){if(0===n){break t}m=0;do{gt=r[a+m++],s.head&&gt&&s.length<65536&&(s.head.comment+=String.fromCharCode(gt))}while(gt&&n>m);if(512&s.flags&&(s.check=k(s.check,r,m,a)),n-=m,a+=m,gt){break t}}else{s.head&&(s.head.comment=null)}s.mode=q;case q:if(512&s.flags){for(;16>p;){if(0===n){break t}n--,f+=r[a++]<<p,p+=8}if(f!==(65535&s.check)){t.msg="header crc mismatch",s.mode=ut;break}f=0,p=0}s.head&&(s.head.hcrc=s.flags>>9&1,s.head.done=!0),t.adler=s.check=0,s.mode=Y;break;case V:for(;32>p;){if(0===n){break t}n--,f+=r[a++]<<p,p+=8}t.adler=s.check=i(f),f=0,p=0,s.mode=j;case j:if(0===s.havedict){return t.next_out=h,t.avail_out=l,t.next_in=a,t.avail_in=n,s.hold=f,s.bits=p,P}t.adler=s.check=1,s.mode=Y;case Y:if(e===S||e===T){break t}case W:if(s.last){f>>>=7&p,p-=7&p,s.mode=nt;break}for(;3>p;){if(0===n){break t}n--,f+=r[a++]<<p,p+=8}switch(s.last=1&f,f>>>=1,p-=1,3&f){case 0:s.mode=X;break;case 1:if(c(s),s.mode=et,e===T){f>>>=2,p-=2;break t}break;case 2:s.mode=Q;break;case 3:t.msg="invalid block type",s.mode=ut}f>>>=2,p-=2;break;case X:for(f>>>=7&p,p-=7&p;32>p;){if(0===n){break t}n--,f+=r[a++]<<p,p+=8}if((65535&f)!==(f>>>16^65535)){t.msg="invalid stored block lengths",s.mode=ut;break}if(s.length=65535&f,f=0,p=0,s.mode=G,e===T){break t}case G:s.mode=$;case $:if(m=s.length){if(m>n&&(m=n),m>l&&(m=l),0===m){break t}b.arraySet(o,r,a,m,h),n-=m,a+=m,l-=m,h+=m,s.length-=m;break}s.mode=Y;break;case Q:for(;14>p;){if(0===n){break t}n--,f+=r[a++]<<p,p+=8}if(s.nlen=(31&f)+257,f>>>=5,p-=5,s.ndist=(31&f)+1,f>>>=5,p-=5,s.ncode=(15&f)+4,f>>>=4,p-=4,s.nlen>286||s.ndist>30){t.msg="too many length or distance symbols",s.mode=ut;break}s.have=0,s.mode=J;case J:for(;s.have<s.ncode;){for(;3>p;){if(0===n){break t}n--,f+=r[a++]<<p,p+=8}s.lens[At[s.have++]]=7&f,f>>>=3,p-=3}for(;s.have<19;){s.lens[At[s.have++]]=0}if(s.lencode=s.lendyn,s.lenbits=7,Ct={bits:s.lenbits},_t=x(g,s.lens,0,19,s.lencode,0,s.work,Ct),s.lenbits=Ct.bits,_t){t.msg="invalid code lengths set",s.mode=ut;break}s.have=0,s.mode=tt;case tt:for(;s.have<s.nlen+s.ndist;){for(;St=s.lencode[f&(1<<s.lenbits)-1],mt=St>>>24,bt=St>>>16&255,vt=65535&St,!(p>=mt);){if(0===n){break t}n--,f+=r[a++]<<p,p+=8}if(16>vt){f>>>=mt,p-=mt,s.lens[s.have++]=vt}else{if(16===vt){for(Mt=mt+2;Mt>p;){if(0===n){break t}n--,f+=r[a++]<<p,p+=8}if(f>>>=mt,p-=mt,0===s.have){t.msg="invalid bit length repeat",s.mode=ut;break}gt=s.lens[s.have-1],m=3+(3&f),f>>>=2,p-=2}else{if(17===vt){for(Mt=mt+3;Mt>p;){if(0===n){break t}n--,f+=r[a++]<<p,p+=8}f>>>=mt,p-=mt,gt=0,m=3+(7&f),f>>>=3,p-=3}else{for(Mt=mt+7;Mt>p;){if(0===n){break t}n--,f+=r[a++]<<p,p+=8}f>>>=mt,p-=mt,gt=0,m=11+(127&f),f>>>=7,p-=7}}if(s.have+m>s.nlen+s.ndist){t.msg="invalid bit length repeat",s.mode=ut;break}for(;m--;){s.lens[s.have++]=gt}}}if(s.mode===ut){break}if(0===s.lens[256]){t.msg="invalid code -- missing end-of-block",s.mode=ut;break}if(s.lenbits=9,Ct={bits:s.lenbits},_t=x(_,s.lens,0,s.nlen,s.lencode,0,s.work,Ct),s.lenbits=Ct.bits,_t){t.msg="invalid literal/lengths set",s.mode=ut;break}if(s.distbits=6,s.distcode=s.distdyn,Ct={bits:s.distbits},_t=x(C,s.lens,s.nlen,s.ndist,s.distcode,0,s.work,Ct),s.distbits=Ct.bits,_t){t.msg="invalid distances set",s.mode=ut;break}if(s.mode=et,e===T){break t}case et:s.mode=st;case st:if(n>=6&&l>=258){t.next_out=h,t.avail_out=l,t.next_in=a,t.avail_in=n,s.hold=f,s.bits=p,w(t,y),h=t.next_out,o=t.output,l=t.avail_out,a=t.next_in,r=t.input,n=t.avail_in,f=s.hold,p=s.bits,s.mode===Y&&(s.back=-1);break}for(s.back=0;St=s.lencode[f&(1<<s.lenbits)-1],mt=St>>>24,bt=St>>>16&255,vt=65535&St,!(p>=mt);){if(0===n){break t}n--,f+=r[a++]<<p,p+=8}if(bt&&0===(240&bt)){for(kt=mt,wt=bt,xt=vt;St=s.lencode[xt+((f&(1<<kt+wt)-1)>>kt)],mt=St>>>24,bt=St>>>16&255,vt=65535&St,!(p>=kt+mt);){if(0===n){break t}n--,f+=r[a++]<<p,p+=8}f>>>=kt,p-=kt,s.back+=kt}if(f>>>=mt,p-=mt,s.back+=mt,s.length=vt,0===bt){s.mode=ht;break}if(32&bt){s.back=-1,s.mode=Y;break}if(64&bt){t.msg="invalid literal/length code",s.mode=ut;break}s.extra=15&bt,s.mode=it;case it:if(s.extra){for(Mt=s.extra;Mt>p;){if(0===n){break t}n--,f+=r[a++]<<p,p+=8}s.length+=f&(1<<s.extra)-1,f>>>=s.extra,p-=s.extra,s.back+=s.extra}s.was=s.length,s.mode=rt;case rt:for(;St=s.distcode[f&(1<<s.distbits)-1],mt=St>>>24,bt=St>>>16&255,vt=65535&St,!(p>=mt);){if(0===n){break t}n--,f+=r[a++]<<p,p+=8}if(0===(240&bt)){for(kt=mt,wt=bt,xt=vt;St=s.distcode[xt+((f&(1<<kt+wt)-1)>>kt)],mt=St>>>24,bt=St>>>16&255,vt=65535&St,!(p>=kt+mt);){if(0===n){break t}n--,f+=r[a++]<<p,p+=8}f>>>=kt,p-=kt,s.back+=kt}if(f>>>=mt,p-=mt,s.back+=mt,64&bt){t.msg="invalid distance code",s.mode=ut;break}s.offset=vt,s.extra=15&bt,s.mode=ot;case ot:if(s.extra){for(Mt=s.extra;Mt>p;){if(0===n){break t}n--,f+=r[a++]<<p,p+=8}s.offset+=f&(1<<s.extra)-1,f>>>=s.extra,p-=s.extra,s.back+=s.extra}if(s.offset>s.dmax){t.msg="invalid distance too far back",s.mode=ut;break}s.mode=at;case at:if(0===l){break t}if(m=y-l,s.offset>m){if(m=s.offset-m,m>s.whave&&s.sane){t.msg="invalid distance too far back",s.mode=ut;break}m>s.wnext?(m-=s.wnext,dt=s.wsize-m):dt=s.wnext-m,m>s.length&&(m=s.length),yt=s.window}else{yt=o,dt=h-s.offset,m=s.length}m>l&&(m=l),l-=m,s.length-=m;do{o[h++]=yt[dt++]}while(--m);0===s.length&&(s.mode=st);break;case ht:if(0===l){break t}o[h++]=s.length,l--,s.mode=st;break;case nt:if(s.wrap){for(;32>p;){if(0===n){break t}n--,f|=r[a++]<<p,p+=8}if(y-=l,t.total_out+=y,s.total+=y,y&&(t.adler=s.check=s.flags?k(s.check,o,y,h-y):v(s.check,o,y,h-y)),y=l,(s.flags?f:i(f))!==s.check){t.msg="incorrect data check",s.mode=ut;break}f=0,p=0}s.mode=lt;case lt:if(s.wrap&&s.flags){for(;32>p;){if(0===n){break t}n--,f+=r[a++]<<p,p+=8}if(f!==(4294967295&s.total)){t.msg="incorrect length check",s.mode=ut;break}f=0,p=0}s.mode=ct;case ct:_t=B;break t;case ut:_t=R;break t;case ft:return L;case pt:default:return E}}return t.next_out=h,t.avail_out=l,t.next_in=a,t.avail_in=n,s.hold=f,s.bits=p,(s.wsize||y!==t.avail_out&&s.mode<ut&&(s.mode<nt||e!==M))&&u(t,t.output,t.next_out,y-t.avail_out)?(s.mode=ft,L):(d-=t.avail_in,y-=t.avail_out,t.total_in+=d,t.total_out+=y,s.total+=y,s.wrap&&y&&(t.adler=s.check=s.flags?k(s.check,o,y,t.next_out-y):v(s.check,o,y,t.next_out-y)),t.data_type=s.bits+(s.last?64:0)+(s.mode===Y?128:0)+(s.mode===et||s.mode===G?256:0),(0===d&&0===y||e===M)&&_t===A&&(_t=D),_t)}function p(t){if(!t||!t.state){return E}var e=t.state;return e.window&&(e.window=null),t.state=null,A}function d(t,e){var s;return t&&t.state?(s=t.state,0===(2&s.wrap)?E:(s.head=e,e.done=!1,A)):E}var y,m,b=t("../utils/common"),v=t("./adler32"),k=t("./crc32"),w=t("./inffast"),x=t("./inftrees"),g=0,_=1,C=2,M=4,S=5,T=6,A=0,B=1,P=2,E=-2,R=-3,L=-4,D=-5,N=8,F=1,O=2,I=3,z=4,H=5,Z=6,K=7,U=8,q=9,V=10,j=11,Y=12,W=13,X=14,G=15,$=16,Q=17,J=18,tt=19,et=20,st=21,it=22,rt=23,ot=24,at=25,ht=26,nt=27,lt=28,ct=29,ut=30,ft=31,pt=32,dt=852,yt=592,mt=15,bt=mt,vt=!0;s.inflateReset=a,s.inflateReset2=h,s.inflateResetKeep=o,s.inflateInit=l,s.inflateInit2=n,s.inflate=f,s.inflateEnd=p,s.inflateGetHeader=d,s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(t,e,s){"use strict";var i=t("../utils/common"),r=15,o=852,a=592,h=0,n=1,l=2,c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,s,d,y,m,b,v){var k,w,x,g,_,C,M,S,T,A=v.bits,B=0,P=0,E=0,R=0,L=0,D=0,N=0,F=0,O=0,I=0,z=null,H=0,Z=new i.Buf16(r+1),K=new i.Buf16(r+1),U=null,q=0;for(B=0;r>=B;B++){Z[B]=0}for(P=0;d>P;P++){Z[e[s+P]]++}for(L=A,R=r;R>=1&&0===Z[R];R--){}if(L>R&&(L=R),0===R){return y[m++]=20971520,y[m++]=20971520,v.bits=1,0}for(E=1;R>E&&0===Z[E];E++){}for(E>L&&(L=E),F=1,B=1;r>=B;B++){if(F<<=1,F-=Z[B],0>F){return-1}}if(F>0&&(t===h||1!==R)){return-1}for(K[1]=0,B=1;r>B;B++){K[B+1]=K[B]+Z[B]}for(P=0;d>P;P++){0!==e[s+P]&&(b[K[e[s+P]]++]=P)}if(t===h?(z=U=b,C=19):t===n?(z=c,H-=257,U=u,q-=257,C=256):(z=f,U=p,C=-1),I=0,P=0,B=E,_=m,D=L,N=0,x=-1,O=1<<L,g=O-1,t===n&&O>o||t===l&&O>a){return 1}for(var V=0;;){V++,M=B-N,b[P]<C?(S=0,T=b[P]):b[P]>C?(S=U[q+b[P]],T=z[H+b[P]]):(S=96,T=0),k=1<<B-N,w=1<<D,E=w;do{w-=k,y[_+(I>>N)+w]=M<<24|S<<16|T|0}while(0!==w);for(k=1<<B-1;I&k;){k>>=1}if(0!==k?(I&=k-1,I+=k):I=0,P++,0===--Z[B]){if(B===R){break}B=e[s+b[P]]}if(B>L&&(I&g)!==x){for(0===N&&(N=L),_+=E,D=B-N,F=1<<D;R>D+N&&(F-=Z[D+N],!(0>=F));){D++,F<<=1}if(O+=1<<D,t===n&&O>o||t===l&&O>a){return 1}x=I&g,y[x]=L<<24|D<<16|_-m|0}}return 0!==I&&(y[_+I]=B-N<<24|64<<16|0),v.bits=L,0}},{"../utils/common":1}],10:[function(t,e,s){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],11:[function(t,e,s){"use strict";function i(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=i},{}],"/lib/inflate.js":[function(t,e,s){"use strict";function i(t,e){var s=new p(e);if(s.push(t,!0),s.err){throw s.msg}return s.result}function r(t,e){return e=e||{},e.raw=!0,i(t,e)}var o=t("./zlib/inflate.js"),a=t("./utils/common"),h=t("./utils/strings"),n=t("./zlib/constants"),l=t("./zlib/messages"),c=t("./zlib/zstream"),u=t("./zlib/gzheader"),f=Object.prototype.toString,p=function(t){this.options=a.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0===(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var s=o.inflateInit2(this.strm,e.windowBits);if(s!==n.Z_OK){throw new Error(l[s])}this.header=new u,o.inflateGetHeader(this.strm,this.header)};p.prototype.push=function(t,e){var s,i,r,l,c,u=this.strm,p=this.options.chunkSize;if(this.ended){return!1}i=e===~~e?e:e===!0?n.Z_FINISH:n.Z_NO_FLUSH,"string"==typeof t?u.input=h.binstring2buf(t):"[object ArrayBuffer]"===f.call(t)?u.input=new Uint8Array(t):u.input=t,u.next_in=0,u.avail_in=u.input.length;do{if(0===u.avail_out&&(u.output=new a.Buf8(p),u.next_out=0,u.avail_out=p),s=o.inflate(u,n.Z_NO_FLUSH),s!==n.Z_STREAM_END&&s!==n.Z_OK){return this.onEnd(s),this.ended=!0,!1}u.next_out&&(0===u.avail_out||s===n.Z_STREAM_END||0===u.avail_in&&(i===n.Z_FINISH||i===n.Z_SYNC_FLUSH))&&("string"===this.options.to?(r=h.utf8border(u.output,u.next_out),l=u.next_out-r,c=h.buf2string(u.output,r),u.next_out=l,u.avail_out=p-l,l&&a.arraySet(u.output,u.output,r,l,0),this.onData(c)):this.onData(a.shrinkBuf(u.output,u.next_out)))}while(u.avail_in>0&&s!==n.Z_STREAM_END);return s===n.Z_STREAM_END&&(i=n.Z_FINISH),i===n.Z_FINISH?(s=o.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===n.Z_OK):i===n.Z_SYNC_FLUSH?(this.onEnd(n.Z_OK),u.avail_out=0,!0):!0},p.prototype.onData=function(t){this.chunks.push(t)},p.prototype.onEnd=function(t){t===n.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},s.Inflate=p,s.inflate=i,s.inflateRaw=r,s.ungzip=i},{"./utils/common":1,"./utils/strings":2,"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate.js":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js")}),function(t,e){function s(t){for(var e=1,s=arguments.length;s>e;++e){var i=arguments[e];for(var r in i){i.hasOwnProperty(r)&&(t[r]=i[r])}}return t}function i(t,e){return 16777216*t[e+3]+65536*t[e+2]+256*t[e+1]+t[e]}function r(t,e,s){var i=document.createElement(t);if(e){for(var r in e){e.hasOwnProperty(r)&&(i[r]=e[r])}}if(s){if("string"==typeof s){i.appendChild(document.createTextNode(s))}else{if(s.tagName){i.appendChild(s)}else{if(s.length){for(var o=0,a=s.length;a>o;++o){var h=s[o];"string"==typeof h&&(h=document.createTextNode(h)),i.appendChild(h)}}}}}return i}function o(t,e){if("string"==typeof t&&(t=document.getElementById(t)),this.container=t,e=s({},o.defaultOptions,e||{}),this.options=e,this.position=this.options.position,this.initializeTerminal(),e.controls&&this.initializeControls(),e.url){this.loadUrl(e.url)}else{if(e.rawTtyRecord){this.loadRawTtyRecord(e.rawTtyRecord,e.gzip),e.auto&&this.start()}else{if(!e.ttyFrames){throw"No data to replay!"}this.ttyFrames=e.ttyFrames,e.auto&&this.start()}}}o.defaultOptions={url:null,rawTtyRecord:null,gzip:!1,ttyFrames:null,precompose:!1,cols:80,rows:25,speed:1,auto:!1,repeat:!1,position:0,controls:!0},o.ungzip=function(t){return pako.ungzip(t)},o.prototype.destroy=function(){this.terminal&&this.terminal.element&&(this.terminal.element.parentNode.removeChild(this.terminal.element),this.terminal.element=null,this.terminal=null),this.controls&&this.controls.container&&(this.controls.container.parentNode.removeChild(this.controls.container),this.controls=null)},o.prototype.initializeTerminal=function(){this.terminal=new Terminal({cols:this.options.cols,rows:this.options.rows,parent:this.container,cursorBlink:!1}),this.terminal.blur=this.terminal.keyDown=this.terminal.keyPress=function(){},this.terminal.open()},o.prototype.initializeControls=function(){var t=this,e=function(){t.running?t.paused?(t.resume(),t.controls.play.className="pause",t.controls.play.innerHTML="Pause"):(t.pause(),t.controls.play.className="play",t.controls.play.innerHTML="Play"):(t.start(),t.controls.play.className="pause",t.controls.play.innerHTML="Pause")},s=function(){t.stop(),t.controls.play.className="play",t.controls.play.innerHTML="Play"},i=function(e){clearTimeout(t.lastTimeout);var s=Math.round(t.ttyFrames.length*e.offsetX/t.controls.progressWrapper.offsetWidth);t.jump(s),t.running&&!t.paused&&t.resume()},o={};this.controls=o,o.progressBar=r("span"),o.progressWrapper=r("span",{className:"progress",onclick:i},[o.progressBar]),o.play=r("a",{href:"javascript:;",className:"play",onclick:e},"Play"),o.stop=r("a",{href:"javascript:;",className:"stop",onclick:s},"Stop"),o.container=r("span",{className:"controls"},[o.progressWrapper,o.play,o.stop]),this.container.appendChild(o.container)},o.prototype.updateProgressBar=function(){if(this.options.controls){var t=Math.round(100*this.position/this.ttyFrames.length);this.controls.progressBar.style.width=t+"%"}},o.prototype.loadUrl=function(t){var e=this,s=new XMLHttpRequest;s.open("GET",t,!0),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.responseType="arraybuffer",s.onload=function(){e.loadRawTtyRecord(new Uint8Array(this.response),e.options.gzip),e.options.auto&&e.start()},s.send(null)},o.prototype.loadRawTtyRecord=function(t,e){e&&(t=o.ungzip(t));for(var s=[],r=0,a=t.byteLength,h=i(t,0),n=i(t,4);a>r;){var l=i(t,r),c=i(t,r+4),u=l-h+1e-6*(c-n);h=l,n=c;var f=i(t,r+8),p=t.subarray(r+12,r+12+f),d=String.fromCharCode.apply(null,p),y=decodeURIComponent(escape(d)),m=null;this.options.precompose&&(m=s.length?s[s.length-1].fullData+y:y),s.push({index:s.length,time:u,size:f,frameData:y,fullData:m}),r+=12+f}this.ttyFrames=s},o.prototype.start=function(){this.running=!0,this.paused=!1;var t=this.ttyFrames[this.position];t&&this.redraw(t);var e=this.ttyFrames[this.position+1];if(e){var s=this;this.lastTimeout=setTimeout(function(){++s.position,s.tick()},1e3*e.time*this.options.speed)}this.controls&&this.controls.play&&(this.controls.play.className="pause",this.controls.play.innerHTML="Pause")},o.prototype.stop=function(){this.running=!1,this.paused=!1,this.position=0,this.terminal.reset(),this.terminal.showCursor(),this.updateProgressBar(),this.controls&&this.controls.play&&(this.controls.play.className="play",this.controls.play.innerHTML="Play")},o.prototype.pause=function(){this.running&&(clearTimeout(this.lastTimeout),this.paused=!0,this.controls&&this.controls.play&&(this.controls.play.className="play",this.controls.play.innerHTML="Play"))},o.prototype.resume=function(){if(this.running){clearTimeout(this.lastTimeout),this.paused=!1;var t=this.ttyFrames[this.position+1];if(t){var e=this;this.lastTimeout=setTimeout(function(){++e.position,e.tick()},1e3*t.time*this.options.speed)}this.controls&&this.controls.play&&(this.controls.play.className="pause",this.controls.play.innerHTML="Pause")}},o.prototype.redraw=function(t){if(t||(t=this.ttyFrames[this.position]),this.terminal&&this.terminal.element&&this.terminal.element.parentNode.removeChild(this.terminal.element),this.initializeTerminal(),this.terminal.showCursor(),t.fullData){this.terminal.write(t.fullData)}else{for(var e=0;e<=t.index;++e){var s=this.ttyFrames[e];this.terminal.write(s.frameData)}}},o.prototype.jump=function(t){this.position=t,this.updateProgressBar(),this.redraw()},o.prototype.tick=function(){if(this.running&&!this.paused){var t=this.ttyFrames[this.position];if(t&&(this.updateProgressBar(),this.terminal.write(t.frameData),!this.paused)){var e=this.ttyFrames[this.position+1];if(e){var s=this;this.lastTimeout=setTimeout(function(){++s.position,s.tick()},1e3*e.time*this.options.speed)}else{this.options.repeat?(this.stop(),this.start()):(this.position=this.ttyFrames.length,this.updateProgressBar(),this.position=0,this.running=!1,this.controls&&this.controls.play&&(this.controls.play.className="play",this.controls.play.innerHTML="Play"))}}}},t.TTYPlay=o}(this);